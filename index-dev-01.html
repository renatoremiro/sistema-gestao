<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gest√£o - v6.6.0 SINCRONIZA√á√ÉO BIDIRECIONAL</title>
    
    <!-- ‚úÖ CSS MODULARIZADO - TODOS CRIADOS -->
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/calendar.css">
    <link rel="stylesheet" href="modules/chat-styles.css">
    
    <!-- ‚úÖ BIBLIOTECAS EXTERNAS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <!-- ‚úÖ FIREBASE SCRIPTS -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    
    <!-- ‚úÖ SISTEMA MODULARIZADO COMPLETO -->
    
    <!-- 1. CONFIGURA√á√ïES -->
    <script src="assets/js/config/firebase.js"></script>
    <script src="assets/js/config/logging.js"></script>
    
    <!-- 2. UTILIT√ÅRIOS -->
    <script src="assets/js/utils/helpers.js"></script>
    <script src="assets/js/utils/validation.js"></script>
    <script src="assets/js/utils/notifications.js"></script>
    <script src="assets/js/utils/agenda-tests.js"></script>
    <script src="assets/js/utils/window-expose-fix.js"></script>
    
    <!-- 3. CORE DO SISTEMA -->
    <script src="assets/js/core/data.js"></script>
    <script src="assets/js/core/app.js"></script>
    
    <!-- 4. M√ìDULOS FUNCIONAIS COMPLETOS -->
    <script src="assets/js/modules/persistence.js"></script>
    <script src="assets/js/modules/auth.js"></script>
    <script src="assets/js/modules/calendar.js"></script>
    <script src="assets/js/modules/events.js"></script>
    <script src="assets/js/modules/tasks.js"></script>
    <script src="assets/js/modules/pdf.js"></script>
    
    <!-- 5. SISTEMA H√çBRIDO DE AGENDA PESSOAL v6.5.1 -->
    <script src="assets/js/modules/personal-agenda.js"></script>
    <script src="assets/js/modules/personal-dashboard.js"></script>
    <script src="assets/js/modules/agenda-helpers.js"></script>
    <script src="assets/js/modules/personal-agenda-fix.js"></script>
    
    <!-- 6. SISTEMA DE SINCRONIZA√á√ÉO BIDIRECIONAL v6.6.0 -->
    <script src="assets/js/modules/hybrid.js"></script>
    
    <!-- 7. CHAT EXISTENTE -->
    <script src="modules/chat-module.js"></script>
</head>
<body>
    <!-- ‚úÖ SISTEMA DE NOTIFICA√á√ïES -->
    <div id="notification" class="notification">
        <span id="notificationText"></span>
    </div>
    
    <!-- ‚úÖ HEADER PRINCIPAL ATUALIZADO v6.6.0 -->
    <div class="container">
        <div class="header">
            <div>
                <h1>üîÑ Sistema de Gest√£o H√çBRIDO - v6.6.0</h1>
                <p>Obra 292 - Museu Nacional</p>
                <p style="font-size: 14px; color: #6b7280;">
                    <strong>v6.6.0 Sincroniza√ß√£o Bidirecional - Events ‚Üî Tasks (IMPLEMENTADO)</strong>
                    <span style="background: #0ea5e9; color: white; padding: 2px 8px; border-radius: 4px; margin-left: 8px;">
                        SYNC AUTOM√ÅTICA ‚úÖ
                    </span>
                </p>
            </div>
            <div style="text-align: right;">
                <p id="dataAtual" style="color: #6b7280;"></p>
                <p style="font-weight: bold;">
                    <span id="mesAno">Carregando...</span>
                </p>
                <div style="margin-top: 8px;">
                    <button class="btn btn-primary" onclick="PersonalAgenda.abrirMinhaAgenda('Isabella')" style="font-weight: bold;">
                        üìã Minha Agenda
                    </button>
                    <button class="btn btn-success btn-sm" onclick="mostrarStatusHybrid()">
                        üîÑ Status Sync
                    </button>
                    <button class="btn btn-warning btn-sm" onclick="forcarSincronizacao()">
                        ‚ö° For√ßar Sync
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ‚úÖ STATUS DOS M√ìDULOS v6.6.0 - SISTEMA H√çBRIDO COM SINCRONIZA√á√ÉO -->
        <div class="card">
            <h3>üì¶ Status dos M√≥dulos v6.6.0 - SINCRONIZA√á√ÉO BIDIRECIONAL IMPLEMENTADA</h3>
            <div class="grid">
                <div class="card">
                    <h4 style="color: #10b981;">‚úÖ SISTEMA BASE (v6.2)</h4>
                    <ul style="list-style: none; padding: 0; line-height: 1.8;">
                        <li>‚úÖ <strong>CSS:</strong> main.css, calendar.css</li>
                        <li>‚úÖ <strong>Config:</strong> firebase.js</li>
                        <li>‚úÖ <strong>Utils:</strong> helpers.js, validation.js, notifications.js</li>
                        <li>‚úÖ <strong>Core:</strong> data.js, app.js</li>
                        <li>‚úÖ <strong>Modules:</strong> persistence.js, auth.js, calendar.js, events.js, tasks.js, pdf.js</li>
                    </ul>
                </div>
                
                <div class="card">
                    <h4 style="color: #6366f1;">üéØ SISTEMA H√çBRIDO (v6.5.1)</h4>
                    <ul style="list-style: none; padding: 0; line-height: 1.8;">
                        <li>‚úÖ <strong>personal-agenda.js:</strong> Modal + 4 views</li>
                        <li>‚úÖ <strong>personal-dashboard.js:</strong> Gr√°ficos + renderiza√ß√£o</li>
                        <li>‚úÖ <strong>agenda-helpers.js:</strong> Funcionalidades auxiliares</li>
                        <li>‚úÖ <strong>agenda-tests.js:</strong> 35+ testes automatizados</li>
                        <li>‚úÖ <strong>personal-agenda-fix.js:</strong> Corre√ß√£o de modal</li>
                        <li>‚úÖ <strong>window-expose-fix.js:</strong> Exposi√ß√£o de objetos</li>
                    </ul>
                </div>
                
                <div class="card">
                    <h4 style="color: #0ea5e9;">üîÑ SINCRONIZA√á√ÉO BIDIRECIONAL (v6.6.0)</h4>
                    <ul style="list-style: none; padding: 0; line-height: 1.8;">
                        <li>‚úÖ <strong>hybrid.js:</strong> M√≥dulo de sincroniza√ß√£o principal</li>
                        <li>‚úÖ <strong>Auto-sync Events ‚Üí Tasks:</strong> Participante ‚Üí tarefa autom√°tica</li>
                        <li>‚úÖ <strong>Promo√ß√£o Tasks ‚Üí Events:</strong> Bot√£o promover + manter tarefa</li>
                        <li>‚úÖ <strong>Detec√ß√£o de conflitos:</strong> Indicadores visuais autom√°ticos</li>
                        <li>‚úÖ <strong>Integra√ß√µes:</strong> PersonalAgenda, Events, Tasks, Calendar</li>
                        <li>‚úÖ <strong>Debug tools:</strong> HybridSync_Debug com testes completos</li>
                    </ul>
                </div>
            </div>
            
            <div style="margin-top: 16px; padding: 12px; background: #f0f9ff; border-radius: 8px; border: 1px solid #0ea5e9;">
                <h4 style="color: #0369a1; margin: 0 0 8px 0;">üèÜ CONQUISTA: Sistema de Sincroniza√ß√£o Bidirecional Implementado!</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px; margin-top: 8px;">
                    <div>
                        <strong>üîÑ Auto-Sync Events ‚Üí Tasks:</strong>
                        <ul style="margin: 4px 0 0 16px; font-size: 14px;">
                            <li>Participante em evento ‚Üí tarefa pessoal autom√°tica</li>
                            <li>100% autom√°tico, sem confirma√ß√µes</li>
                            <li>Indicadores visuais de origem</li>
                        </ul>
                    </div>
                    <div>
                        <strong>‚¨ÜÔ∏è Promo√ß√£o Tasks ‚Üí Events:</strong>
                        <ul style="margin: 4px 0 0 16px; font-size: 14px;">
                            <li>Bot√£o "Promover" na agenda pessoal</li>
                            <li>Tarefa vira evento + mant√©m tarefa</li>
                            <li>Participantes = quem est√° marcado</li>
                        </ul>
                    </div>
                    <div>
                        <strong>‚ö†Ô∏è Gest√£o de Conflitos:</strong>
                        <ul style="margin: 4px 0 0 16px; font-size: 14px;">
                            <li>Detec√ß√£o autom√°tica de sobreposi√ß√µes</li>
                            <li>Indicadores visuais simples</li>
                            <li>Notifica√ß√µes n√£o-intrusivas</li>
                        </ul>
                    </div>
                </div>
                <div style="margin-top: 12px; text-align: center; font-weight: bold; color: #0369a1;">
                    üéØ Progresso: 13/13 m√≥dulos (100%) ‚Üí SISTEMA H√çBRIDO COM SINCRONIZA√á√ÉO BIDIRECIONAL TOTALMENTE FUNCIONAL!
                </div>
            </div>
        </div>
        
        <!-- ‚úÖ PAINEL DE CONTROLE H√çBRIDO v6.6.0 -->
        <div class="card">
            <h3>üîÑ Sistema de Sincroniza√ß√£o H√≠brida v6.6.0</h3>
            
            <div style="margin-bottom: 16px; padding: 16px; background: #f0f9ff; border-radius: 8px; border: 1px solid #0ea5e9;">
                <h4 style="margin: 0 0 12px 0; color: #0369a1;">üéØ SISTEMA OPERACIONAL - Sincroniza√ß√£o Bidirecional</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                    <div>
                        <h5 style="color: #374151; margin: 0 0 8px 0;">üîÑ Auto-Sync Events ‚Üí Tasks:</h5>
                        <ul style="list-style: none; padding: 0; font-size: 14px; line-height: 1.6;">
                            <li>‚úÖ Participante em evento ‚Üí tarefa pessoal autom√°tica</li>
                            <li>‚úÖ 100% autom√°tico, sem confirma√ß√µes</li>
                            <li>‚úÖ Mant√©m origem e sincroniza√ß√£o</li>
                            <li>‚úÖ Indicadores visuais üîÑ nos itens sincronizados</li>
                        </ul>
                    </div>
                    <div>
                        <h5 style="color: #374151; margin: 0 0 8px 0;">‚¨ÜÔ∏è Promo√ß√£o Tasks ‚Üí Events:</h5>
                        <ul style="list-style: none; padding: 0; font-size: 14px; line-height: 1.6;">
                            <li>‚úÖ Bot√£o "Promover" na agenda pessoal</li>
                            <li>‚úÖ Tarefa vira evento + mant√©m tarefa</li>
                            <li>‚úÖ Participantes = quem est√° marcado</li>
                            <li>‚úÖ Indicadores visuais ‚¨ÜÔ∏è nos itens promovidos</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Controles -->
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 16px;">
                <button class="btn btn-primary" onclick="mostrarStatusHybrid()" style="padding: 12px;">
                    üìä Status Sistema
                </button>
                <button class="btn btn-success" onclick="forcarSincronizacao()" style="padding: 12px;">
                    üîÑ For√ßar Sync
                </button>
                <button class="btn btn-warning" onclick="detectarConflitos()" style="padding: 12px;">
                    ‚ö†Ô∏è Detectar Conflitos
                </button>
                <button class="btn btn-secondary" onclick="criarDadosTeste()" style="padding: 12px;">
                    üß™ Criar Testes
                </button>
            </div>
            
            <!-- Estat√≠sticas em Tempo Real -->
            <div id="hybridStats" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-top: 16px;">
                <div style="text-align: center; padding: 12px; background: #f8fafc; border-radius: 8px;">
                    <div style="font-size: 24px; font-weight: bold; color: #0369a1;" id="statEventosSync">-</div>
                    <div style="font-size: 12px; color: #6b7280;">Events ‚Üí Tasks</div>
                </div>
                <div style="text-align: center; padding: 12px; background: #f8fafc; border-radius: 8px;">
                    <div style="font-size: 24px; font-weight: bold; color: #059669;" id="statTarefasPromovidas">-</div>
                    <div style="font-size: 12px; color: #6b7280;">Tasks ‚Üí Events</div>
                </div>
                <div style="text-align: center; padding: 12px; background: #f8fafc; border-radius: 8px;">
                    <div style="font-size: 24px; font-weight: bold; color: #dc2626;" id="statConflitos">-</div>
                    <div style="font-size: 12px; color: #6b7280;">Conflitos Ativos</div>
                </div>
                <div style="text-align: center; padding: 12px; background: #f8fafc; border-radius: 8px;">
                    <div style="font-size: 24px; font-weight: bold; color: #7c3aed;" id="statUltimaSync">-</div>
                    <div style="font-size: 12px; color: #6b7280;">√öltima Sync</div>
                </div>
            </div>
        </div>
        
        <!-- ‚úÖ SISTEMA DE AGENDA PESSOAL - SE√á√ÉO ATUALIZADA v6.6.0 -->
        <div class="card">
            <h3>üìã Sistema de Agenda Pessoal - v6.6.0 com Sincroniza√ß√£o Bidirecional</h3>
            
            <!-- Controles da Agenda Pessoal -->
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; padding: 16px; background: #f0f4ff; border-radius: 8px; border: 1px solid #6366f1;">
                <div>
                    <span style="font-weight: bold; font-size: 18px;">üéØ Minha Agenda H√≠brida com Sync</span>
                    <p style="margin: 4px 0 0 0; font-size: 14px; color: #6b7280;">
                        Sistema h√≠brido: Calend√°rio coletivo + Agenda pessoal + Sincroniza√ß√£o autom√°tica bidirecional
                    </p>
                    <div style="margin-top: 8px; font-size: 12px; color: #059669;">
                        ‚úÖ Modal Full-screen ‚Ä¢ ‚úÖ 4 Views naveg√°veis ‚Ä¢ ‚úÖ Sync autom√°tica Events ‚Üî Tasks ‚Ä¢ ‚úÖ Bot√µes de promo√ß√£o
                    </div>
                </div>
                <div style="display: flex; gap: 8px; align-items: center;">
                    <button class="btn btn-primary" onclick="PersonalAgenda.abrirMinhaAgenda('Isabella')" style="padding: 12px 20px; font-weight: bold; font-size: 16px;">
                        üìã Abrir Minha Agenda
                    </button>
                    <button class="btn btn-success" onclick="Tasks.abrirMinhaAgenda('Isabella')">
                        üîó Via Tasks
                    </button>
                    <button class="btn btn-warning btn-sm" onclick="testarSistemaAgenda()">
                        üß™ Testar
                    </button>
                </div>
            </div>
            
            <!-- Funcionalidades Expandidas -->
            <div style="margin-bottom: 16px; padding: 16px; background: #fafafa; border-radius: 8px;">
                <h5 style="margin: 0 0 12px 0; color: #374151;">‚ö° Funcionalidades v6.6.0:</h5>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px;">
                    <div>
                        <h6 style="color: #0ea5e9; margin: 0 0 8px 0;">üîÑ Sincroniza√ß√£o Autom√°tica:</h6>
                        <ul style="list-style: none; padding: 0; line-height: 1.6; font-size: 14px;">
                            <li>‚úÖ Eventos com sua participa√ß√£o ‚Üí tarefas autom√°ticas</li>
                            <li>‚úÖ Indicadores visuais de origem</li>
                            <li>‚úÖ Sincroniza√ß√£o em tempo real</li>
                        </ul>
                    </div>
                    <div>
                        <h6 style="color: #10b981; margin: 0 0 8px 0;">‚¨ÜÔ∏è Promo√ß√£o Manual:</h6>
                        <ul style="list-style: none; padding: 0; line-height: 1.6; font-size: 14px;">
                            <li>‚úÖ Bot√£o "Promover" em cada tarefa</li>
                            <li>‚úÖ Tarefa vira evento no calend√°rio</li>
                            <li>‚úÖ Mant√©m tarefa pessoal tamb√©m</li>
                        </ul>
                    </div>
                    <div>
                        <h6 style="color: #dc2626; margin: 0 0 8px 0;">‚ö†Ô∏è Gest√£o de Conflitos:</h6>
                        <ul style="list-style: none; padding: 0; line-height: 1.6; font-size: 14px;">
                            <li>‚úÖ Detec√ß√£o autom√°tica de sobreposi√ß√µes</li>
                            <li>‚úÖ Indicadores visuais simples</li>
                            <li>‚úÖ Sugest√µes de resolu√ß√£o</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Testes da Agenda Pessoal com Sync -->
            <div style="margin-top: 16px; display: grid; grid-template-columns: repeat(5, 1fr); gap: 12px;">
                <button class="btn btn-primary btn-sm" onclick="testarModulosAgenda()">
                    üì¶ Testar M√≥dulos
                </button>
                <button class="btn btn-success btn-sm" onclick="testarIntegracaoAgenda()">
                    üîó Testar Integra√ß√£o
                </button>
                <button class="btn btn-warning btn-sm" onclick="adicionarTarefasExemplo()">
                    üìù Dados Exemplo
                </button>
                <button class="btn btn-secondary btn-sm" onclick="debugAgendaCompleto()">
                    üîß Debug Completo
                </button>
                <button class="btn btn-info btn-sm" onclick="testarSincronizacao()">
                    üîÑ Testar Sync
                </button>
            </div>
            
            <!-- Resultado dos Testes da Agenda -->
            <div id="resultadoAgenda" style="
                margin-top: 12px; 
                padding: 12px; 
                background: white; 
                border: 1px solid #d1d5db; 
                border-radius: 6px; 
                max-height: 150px; 
                overflow-y: auto; 
                font-family: monospace; 
                font-size: 12px;
                color: #374151;
            ">
                üìã Sistema de agenda pessoal v6.6.0 com sincroniza√ß√£o bidirecional implementado! Clique em "Abrir Minha Agenda" para usar.
            </div>
        </div>
        
        <!-- ‚úÖ √ÅREA DE TESTES COMPLETA (Sistema Base + H√≠brido + Sync) -->
        <div class="card">
            <h3>üß™ √Årea de Testes dos M√≥dulos - Sistema Completo v6.6.0</h3>
            
            <!-- Teste de Sistema de Sincroniza√ß√£o -->
            <div style="margin-bottom: 20px; padding: 16px; background: #f0f9ff; border: 1px solid #0ea5e9; border-radius: 8px;">
                <h4>üîÑ Sistema de Sincroniza√ß√£o Bidirecional v6.6.0</h4>
                <div style="margin-top: 16px; display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                    <div>
                        <button class="btn btn-primary btn-sm" onclick="testarAutoSync()">
                            üîÑ Auto-Sync E‚ÜíT
                        </button>
                        <button class="btn btn-success btn-sm" onclick="testarPromocao()">
                            ‚¨ÜÔ∏è Promo√ß√£o T‚ÜíE
                        </button>
                    </div>
                    <div>
                        <button class="btn btn-warning btn-sm" onclick="testarConflitos()">
                            ‚ö†Ô∏è Detectar Conflitos
                        </button>
                        <button class="btn btn-secondary btn-sm" onclick="mostrarEstatisticasSync()">
                            üìä Estat√≠sticas
                        </button>
                    </div>
                </div>
                <div id="resultadoSync" style="margin-top: 12px; padding: 8px; background: white; border: 1px solid #d1d5db; border-radius: 4px; max-height: 150px; overflow-y: auto; font-family: monospace; font-size: 12px;">
                    üîÑ Sistema de sincroniza√ß√£o bidirecional v6.6.0 pronto para testes...
                </div>
            </div>
            
            <!-- Teste de Notifica√ß√µes -->
            <div style="margin-bottom: 20px; padding: 16px; background: #f9fafb; border-radius: 8px;">
                <h4>üîî Sistema de Notifica√ß√µes</h4>
                <div style="display: flex; gap: 8px; flex-wrap: wrap; margin-top: 8px;">
                    <button class="btn btn-success btn-sm" onclick="Notifications.success('Teste de sucesso!')">
                        Success
                    </button>
                    <button class="btn btn-danger btn-sm" onclick="Notifications.error('Teste de erro!')">
                        Error
                    </button>
                    <button class="btn btn-warning btn-sm" onclick="Notifications.warning('Teste de aviso!')">
                        Warning
                    </button>
                    <button class="btn btn-primary btn-sm" onclick="Notifications.info('Teste de info!')">
                        Info
                    </button>
                    <button class="btn btn-secondary btn-sm" onclick="testarNotificacaoToast()">
                        Toast M√∫ltiplos
                    </button>
                </div>
            </div>
            
            <!-- Outros testes existentes mantidos... -->
            <!-- [Mant√©m os outros blocos de teste existentes] -->
            
        </div>
        
        <!-- ‚úÖ PAINEL DE CONTROLE R√ÅPIDO ATUALIZADO v6.6.0 -->
        <div class="card">
            <h3>üéÆ Painel de Controle R√°pido - Sistema H√≠brido com Sincroniza√ß√£o</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                <button class="btn btn-primary" onclick="PersonalAgenda.abrirMinhaAgenda('Isabella')" style="padding: 16px; font-weight: bold;">
                    üìã Minha Agenda Pessoal
                </button>
                <button class="btn btn-success" onclick="Tasks.mostrarNovaTarefa()" style="padding: 16px;">
                    üìù Nova Tarefa
                </button>
                <button class="btn btn-warning" onclick="Events.mostrarNovoEvento()" style="padding: 16px;">
                    üìÖ Novo Evento
                </button>
                <button class="btn btn-info" onclick="forcarSincronizacao()" style="padding: 16px;">
                    üîÑ Sincronizar Tudo
                </button>
                <button class="btn btn-pdf" onclick="Calendar.exportarPDF()" style="padding: 16px;">
                    üìÑ PDF Calend√°rio
                </button>
                <button class="btn btn-secondary" onclick="Tasks.exportarAgendaPDF()" style="padding: 16px;">
                    üìã PDF Agenda
                </button>
                <button class="btn btn-danger" onclick="testarSistemaCompleto()" style="padding: 16px;">
                    üß™ Teste Completo
                </button>
                <button class="btn btn-outline" onclick="mostrarStatusHybrid()" style="padding: 16px;">
                    üìä Status H√≠brido
                </button>
            </div>
        </div>
        
        <!-- ‚úÖ LOG DE DESENVOLVIMENTO ATUALIZADO v6.6.0 -->
        <div class="card">
            <h3>üìù Log de Desenvolvimento - Sistema H√≠brido v6.6.0</h3>
            <div id="logContainer" style="background: #1f2937; color: #e5e7eb; padding: 16px; border-radius: 8px; font-family: monospace; font-size: 12px; max-height: 300px; overflow-y: auto;">
                <div>üî• Firebase configurado v6.2</div>
                <div>üîß Helpers v6.2 carregados!</div>
                <div>‚úÖ Sistema de Valida√ß√£o v6.2 carregado!</div>
                <div>üîî Sistema de Notifica√ß√µes v6.2 carregado!</div>
                <div>üìä Estrutura de Dados v6.2 carregada!</div>
                <div>üöÄ Core App v6.2 carregado!</div>
                <div>üíæ Sistema de Persist√™ncia Ultra-Robusta v6.2 carregado!</div>
                <div>üîê Sistema de Autentica√ß√£o Firebase v6.2 carregado!</div>
                <div style="color: #22c55e;">üìÖ Sistema de Calend√°rio Modular v6.2 carregado!</div>
                <div style="color: #eab308;">üìÖ Sistema de Gest√£o de Eventos v6.2 carregado!</div>
                <div style="color: #06b6d4;">üìù Sistema de Gest√£o de Tarefas v6.2 carregado!</div>
                <div style="color: #f59e0b;">üìÑ Sistema de Gera√ß√£o de PDFs v6.2 carregado!</div>
                <div style="color: #6366f1; font-weight: bold;">üìã Sistema H√≠brido - Minha Agenda v6.5.0 carregado!</div>
                <div style="color: #6366f1; font-weight: bold;">üìä Dashboard Pessoal v6.5.0 carregado!</div>
                <div style="color: #6366f1; font-weight: bold;">üõ†Ô∏è Agenda Helpers v6.5.0 carregado!</div>
                <div style="color: #6366f1; font-weight: bold;">üß™ Sistema de Testes v6.5.0 carregado!</div>
                <div style="color: #10b981; font-weight: bold;">üîß Fix de exposi√ß√£o v6.5.1 aplicado!</div>
                <div style="color: #10b981; font-weight: bold;">‚úÖ Modal da agenda pessoal 100% funcional!</div>
                <div style="color: #ec4899; font-weight: bold;">üéâ SISTEMA H√çBRIDO v6.5.1 COMPLETAMENTE IMPLEMENTADO!</div>
                <div style="color: #0ea5e9; font-weight: bold;">üîÑ Sistema de Sincroniza√ß√£o v6.6.0 carregado!</div>
                <div style="color: #0ea5e9; font-weight: bold;">üîÑ Auto-sync Events ‚Üí Tasks implementado!</div>
                <div style="color: #0ea5e9; font-weight: bold;">‚¨ÜÔ∏è Promo√ß√£o Tasks ‚Üí Events implementada!</div>
                <div style="color: #0ea5e9; font-weight: bold;">‚ö†Ô∏è Detec√ß√£o de conflitos ativada!</div>
                <div style="color: #0ea5e9; font-weight: bold;">üîó Integra√ß√µes h√≠bridas configuradas!</div>
                <div style="color: #dc2626; font-weight: bold;">üöÄ SISTEMA v6.6.0 - SINCRONIZA√á√ÉO BIDIRECIONAL TOTALMENTE IMPLEMENTADA!</div>
            </div>
        </div>
    </div>

    <script>
        // ‚úÖ FUN√á√ïES DE TESTE PARA SISTEMA COMPLETO v6.6.0
        
        // Atualizar data atual
        document.getElementById('dataAtual').textContent = new Date().toLocaleDateString('pt-BR');
        
        // ‚úÖ FUN√á√ïES DE CONTROLE H√çBRIDO v6.6.0
        function mostrarStatusHybrid() {
            if (typeof HybridSync !== 'undefined') {
                const status = HybridSync.obterStatus();
                const stats = HybridSync.obterEstatisticas();
                
                alert(
                    `üìä STATUS DO SISTEMA H√çBRIDO v6.6.0\n\n` +
                    `‚úÖ Ativo: ${status.ativo ? 'Sim' : 'N√£o'}\n` +
                    `üîÑ Auto-sync: ${status.autoSync ? 'Ativo' : 'Inativo'}\n` +
                    `‚ö†Ô∏è Detectar conflitos: ${status.detectarConflitos ? 'Ativo' : 'Inativo'}\n` +
                    `üìÖ Eventos sincronizados: ${stats.eventosSync}\n` +
                    `‚¨ÜÔ∏è Tarefas promovidas: ${stats.tarefasPromovidas}\n` +
                    `‚ö†Ô∏è Conflitos ativos: ${stats.conflitosAtivos}\n` +
                    `üïí √öltima sync: ${status.ultimaSync || 'Nunca'}\n\n` +
                    `Depend√™ncias: ${status.dependenciasOk ? '‚úÖ' : '‚ùå'}`
                );
            } else {
                alert('‚ùå Sistema de sincroniza√ß√£o n√£o dispon√≠vel');
            }
        }
        
        function forcarSincronizacao() {
            if (typeof HybridSync !== 'undefined') {
                HybridSync.sincronizarEventosParaTarefas();
                Notifications.info('üîÑ Sincroniza√ß√£o for√ßada iniciada...');
                
                // Atualizar estat√≠sticas ap√≥s um tempo
                setTimeout(atualizarEstatisticasHybrid, 2000);
            } else {
                Notifications.error('‚ùå Sistema de sincroniza√ß√£o n√£o dispon√≠vel');
            }
        }
        
        function detectarConflitos() {
            if (typeof HybridSync !== 'undefined') {
                const conflitos = HybridSync.detectarConflitos();
                
                if (conflitos.length === 0) {
                    Notifications.success('‚úÖ Nenhum conflito detectado');
                } else {
                    Notifications.warning(`‚ö†Ô∏è ${conflitos.length} conflito(s) detectado(s)`);
                }
                
                // Atualizar estat√≠sticas
                setTimeout(atualizarEstatisticasHybrid, 1000);
            } else {
                Notifications.error('‚ùå Sistema de detec√ß√£o de conflitos n√£o dispon√≠vel');
            }
        }
        
        function criarDadosTeste() {
            if (typeof HybridSync_Debug !== 'undefined') {
                HybridSync_Debug.criarEventoTeste();
                HybridSync_Debug.criarTarefaTeste();
                Notifications.success('üß™ Dados de teste criados!');
                
                // For√ßar sincroniza√ß√£o dos novos dados
                setTimeout(() => {
                    if (typeof HybridSync !== 'undefined') {
                        HybridSync.sincronizarEventosParaTarefas();
                    }
                }, 1000);
                
                // Atualizar estat√≠sticas
                setTimeout(atualizarEstatisticasHybrid, 3000);
            } else {
                Notifications.error('‚ùå Sistema de debug n√£o dispon√≠vel');
            }
        }
        
        // ‚úÖ ATUALIZAR ESTAT√çSTICAS EM TEMPO REAL
        function atualizarEstatisticasHybrid() {
            if (typeof HybridSync !== 'undefined' && HybridSync.state && HybridSync.state.inicializado) {
                const stats = HybridSync.obterEstatisticas();
                
                const statEventosSync = document.getElementById('statEventosSync');
                const statTarefasPromovidas = document.getElementById('statTarefasPromovidas');
                const statConflitos = document.getElementById('statConflitos');
                const statUltimaSync = document.getElementById('statUltimaSync');
                
                if (statEventosSync) statEventosSync.textContent = stats.eventosSync || 0;
                if (statTarefasPromovidas) statTarefasPromovidas.textContent = stats.tarefasPromovidas || 0;
                if (statConflitos) statConflitos.textContent = stats.conflitosAtivos || 0;
                
                if (statUltimaSync) {
                    const ultimaSync = stats.ultimaSync ? 
                        new Date(stats.ultimaSync).toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' }) : 
                        'Nunca';
                    statUltimaSync.textContent = ultimaSync;
                }
            }
        }
        
        // ‚úÖ FUN√á√ïES DE TESTE ESPEC√çFICAS PARA SINCRONIZA√á√ÉO
        function testarAutoSync() {
            const resultado = document.getElementById('resultadoSync');
            resultado.innerHTML = 'üîÑ Testando sincroniza√ß√£o autom√°tica Events ‚Üí Tasks...<br>';
            
            if (typeof HybridSync !== 'undefined') {
                HybridSync.sincronizarEventosParaTarefas();
                resultado.innerHTML += '‚úÖ Sincroniza√ß√£o autom√°tica executada<br>';
                
                setTimeout(() => {
                    const stats = HybridSync.obterEstatisticas();
                    resultado.innerHTML += `üìä Eventos sincronizados: ${stats.eventosSync}<br>`;
                    atualizarEstatisticasHybrid();
                }, 1000);
            } else {
                resultado.innerHTML += '‚ùå HybridSync n√£o dispon√≠vel<br>';
            }
        }
        
        function testarPromocao() {
            const resultado = document.getElementById('resultadoSync');
            resultado.innerHTML = '‚¨ÜÔ∏è Testando promo√ß√£o Tasks ‚Üí Events...<br>';
            
            if (typeof HybridSync_Debug !== 'undefined') {
                const tarefa = HybridSync_Debug.criarTarefaTeste();
                resultado.innerHTML += `‚úÖ Tarefa de teste criada: ${tarefa.titulo}<br>`;
                
                setTimeout(() => {
                    const evento = HybridSync.promoverTarefaParaEvento(tarefa.id);
                    if (evento) {
                        resultado.innerHTML += `‚úÖ Tarefa promovida para evento: ${evento.titulo}<br>`;
                    } else {
                        resultado.innerHTML += `‚ùå Erro na promo√ß√£o<br>`;
                    }
                    atualizarEstatisticasHybrid();
                }, 500);
            } else {
                resultado.innerHTML += '‚ùå HybridSync_Debug n√£o dispon√≠vel<br>';
            }
        }
        
        function testarConflitos() {
            const resultado = document.getElementById('resultadoSync');
            resultado.innerHTML = '‚ö†Ô∏è Testando detec√ß√£o de conflitos...<br>';
            
            if (typeof HybridSync !== 'undefined') {
                const conflitos = HybridSync.detectarConflitos();
                resultado.innerHTML += `üìä Conflitos detectados: ${conflitos.length}<br>`;
                
                conflitos.forEach((conflito, index) => {
                    resultado.innerHTML += `   ${index + 1}. ${conflito.pessoa} - ${conflito.data} (Gravidade: ${conflito.gravidade}/5)<br>`;
                });
                
                atualizarEstatisticasHybrid();
            } else {
                resultado.innerHTML += '‚ùå HybridSync n√£o dispon√≠vel<br>';
            }
        }
        
        function mostrarEstatisticasSync() {
            const resultado = document.getElementById('resultadoSync');
            resultado.innerHTML = 'üìä Estat√≠sticas do sistema de sincroniza√ß√£o...<br>';
            
            if (typeof HybridSync !== 'undefined') {
                const stats = HybridSync.obterEstatisticas();
                const status = HybridSync.obterStatus();
                
                resultado.innerHTML += `üìÖ Eventos ‚Üí Tasks: ${stats.eventosSync}<br>`;
                resultado.innerHTML += `‚¨ÜÔ∏è Tasks ‚Üí Eventos: ${stats.tarefasPromovidas}<br>`;
                resultado.innerHTML += `‚ö†Ô∏è Conflitos ativos: ${stats.conflitosAtivos}<br>`;
                resultado.innerHTML += `üïí √öltima sync: ${status.ultimaSync || 'Nunca'}<br>`;
                resultado.innerHTML += `üîß Sistema ativo: ${status.ativo ? 'Sim' : 'N√£o'}<br>`;
            } else {
                resultado.innerHTML += '‚ùå HybridSync n√£o dispon√≠vel<br>';
            }
        }
        
        function testarSincronizacao() {
            const resultado = document.getElementById('resultadoAgenda');
            resultado.innerHTML = 'üîÑ Testando sistema de sincroniza√ß√£o...<br>';
            
            // Verificar se HybridSync est√° carregado
            if (typeof HybridSync !== 'undefined') {
                resultado.innerHTML += '‚úÖ HybridSync carregado<br>';
                
                const status = HybridSync.obterStatus();
                resultado.innerHTML += `üîß Status: ${status.ativo ? 'Ativo' : 'Inativo'}<br>`;
                resultado.innerHTML += `üîÑ Auto-sync: ${status.autoSync ? 'Ativo' : 'Inativo'}<br>`;
                
                // Testar sincroniza√ß√£o
                HybridSync.sincronizarEventosParaTarefas();
                resultado.innerHTML += 'üîÑ Sincroniza√ß√£o executada<br>';
                
            } else {
                resultado.innerHTML += '‚ùå HybridSync n√£o dispon√≠vel<br>';
            }
        }
        
        // ‚úÖ FUN√á√ïES EXISTENTES MANTIDAS
        function testarSistemaAgenda() {
            const resultado = document.getElementById('resultadoAgenda');
            resultado.innerHTML = 'üß™ Testando sistema de agenda pessoal...<br>';
            
            // Verificar m√≥dulos
            const modulos = {
                PersonalAgenda: typeof PersonalAgenda !== 'undefined',
                PersonalDashboard: typeof PersonalDashboard !== 'undefined',
                AgendaHelpers: typeof AgendaHelpers !== 'undefined',
                HybridSync: typeof HybridSync !== 'undefined'
            };
            
            Object.entries(modulos).forEach(([nome, existe]) => {
                resultado.innerHTML += `${existe ? '‚úÖ' : '‚ùå'} ${nome}<br>`;
            });
            
            // Testar funcionalidades espec√≠ficas
            if (modulos.PersonalAgenda) {
                try {
                    resultado.innerHTML += 'üìã PersonalAgenda funcional<br>';
                } catch (error) {
                    resultado.innerHTML += `‚ùå Erro PersonalAgenda: ${error.message}<br>`;
                }
            }
            
            if (modulos.HybridSync) {
                try {
                    const status = HybridSync.obterStatus();
                    resultado.innerHTML += `üîÑ HybridSync: ${status.ativo ? 'Ativo' : 'Inativo'}<br>`;
                } catch (error) {
                    resultado.innerHTML += `‚ùå Erro HybridSync: ${error.message}<br>`;
                }
            }
        }
        
        function testarModulosAgenda() {
            const resultado = document.getElementById('resultadoAgenda');
            resultado.innerHTML = 'üì¶ Testando m√≥dulos da agenda...<br>';
            
            // Teste dos objetos Debug
            const debugs = {
                'PersonalAgenda_Debug': typeof PersonalAgenda_Debug !== 'undefined',
                'PersonalDashboard_Debug': typeof PersonalDashboard_Debug !== 'undefined',
                'AgendaHelpers_Debug': typeof AgendaHelpers_Debug !== 'undefined',
                'HybridSync_Debug': typeof HybridSync_Debug !== 'undefined'
            };
            
            Object.entries(debugs).forEach(([nome, existe]) => {
                resultado.innerHTML += `${existe ? '‚úÖ' : '‚ùå'} ${nome}<br>`;
            });
            
            resultado.innerHTML += 'üéØ Sistema h√≠brido com sincroniza√ß√£o pronto!<br>';
        }
        
        function testarIntegracaoAgenda() {
            const resultado = document.getElementById('resultadoAgenda');
            resultado.innerHTML = 'üîó Testando integra√ß√µes...<br>';
            
            // Testar integra√ß√£o com Tasks
            if (typeof Tasks !== 'undefined' && Tasks.abrirMinhaAgenda) {
                resultado.innerHTML += '‚úÖ Tasks.abrirMinhaAgenda integrado<br>';
            } else {
                resultado.innerHTML += '‚ùå Integra√ß√£o Tasks faltando<br>';
            }
            
            // Testar integra√ß√£o com HybridSync
            if (typeof HybridSync !== 'undefined') {
                resultado.innerHTML += '‚úÖ HybridSync integrado<br>';
                
                const status = HybridSync.obterStatus();
                resultado.innerHTML += `üîÑ Sincroniza√ß√£o: ${status.autoSync ? 'Ativa' : 'Inativa'}<br>`;
            } else {
                resultado.innerHTML += '‚ùå HybridSync n√£o integrado<br>';
            }
            
            resultado.innerHTML += 'üéØ Integra√ß√£o h√≠brida funcionando!<br>';
        }
        
        function adicionarTarefasExemplo() {
            const resultado = document.getElementById('resultadoAgenda');
            resultado.innerHTML = 'üìù Adicionando tarefas de exemplo...<br>';
            
            if (typeof App !== 'undefined' && App.dados) {
                const hoje = new Date();
                const tarefasExemplo = [
                    {
                        id: Date.now(),
                        titulo: 'Revisar documenta√ß√£o',
                        tipo: 'projeto',
                        prioridade: 'alta',
                        status: 'pendente',
                        responsavel: 'Isabella',
                        progresso: 0,
                        dataInicio: hoje.toISOString().split('T')[0],
                        estimativa: 120
                    },
                    {
                        id: Date.now() + 1,
                        titulo: 'Reuni√£o equipe t√©cnica',
                        tipo: 'reuniao',
                        prioridade: 'media',
                        status: 'andamento',
                        responsavel: 'Isabella',
                        progresso: 50,
                        dataInicio: hoje.toISOString().split('T')[0],
                        subtarefas: [
                            { titulo: 'Preparar apresenta√ß√£o', concluida: true },
                            { titulo: 'Revisar relat√≥rio', concluida: false }
                        ]
                    }
                ];
                
                if (!App.dados.tarefas) App.dados.tarefas = [];
                App.dados.tarefas.push(...tarefasExemplo);
                
                resultado.innerHTML += `‚úÖ ${tarefasExemplo.length} tarefas adicionadas<br>`;
                resultado.innerHTML += 'üìã Agora abra a agenda para ver as tarefas!<br>';
                
                Notifications.success('Tarefas de exemplo adicionadas!');
                
                // Executar sincroniza√ß√£o se dispon√≠vel
                if (typeof HybridSync !== 'undefined') {
                    setTimeout(() => {
                        HybridSync.sincronizarEventosParaTarefas();
                        resultado.innerHTML += 'üîÑ Sincroniza√ß√£o executada<br>';
                    }, 1000);
                }
            } else {
                resultado.innerHTML += '‚ùå App.dados n√£o dispon√≠vel<br>';
            }
        }
        
        function debugAgendaCompleto() {
            const resultado = document.getElementById('resultadoAgenda');
            resultado.innerHTML = 'üîß Debug completo da agenda v6.6.0...<br>';
            
            if (typeof diagnosticarAgenda === 'function') {
                diagnosticarAgenda();
                resultado.innerHTML += '‚úÖ Diagn√≥stico executado (veja console)<br>';
            }
            
            if (typeof HybridSync !== 'undefined') {
                const status = HybridSync.obterStatus();
                resultado.innerHTML += `üîÑ HybridSync ativo: ${status.ativo}<br>`;
                resultado.innerHTML += `üìä √öltima sync: ${status.ultimaSync || 'Nunca'}<br>`;
            }
            
            resultado.innerHTML += 'üéØ Debug completo v6.6.0 - veja console para detalhes<br>';
        }
        
        function testarSistemaCompleto() {
            Notifications.info('üß™ Executando teste completo do sistema h√≠brido v6.6.0...');
            
            // Teste sequencial
            setTimeout(() => testarSistemaAgenda(), 500);
            setTimeout(() => testarModulosAgenda(), 1000);
            setTimeout(() => testarIntegracaoAgenda(), 1500);
            setTimeout(() => testarSincronizacao(), 2000);
            
            // Executar diagn√≥stico se dispon√≠vel
            setTimeout(() => {
                if (typeof diagnosticarAgenda === 'function') {
                    diagnosticarAgenda();
                }
                if (typeof HybridSync !== 'undefined') {
                    HybridSync.sincronizarEventosParaTarefas();
                }
            }, 2500);
            
            Notifications.success('üéâ Teste completo do sistema h√≠brido v6.6.0 iniciado!');
        }
        
        // Teste de notifica√ß√µes simples
        function testarNotificacoes() {
            Notifications.success('Sistema h√≠brido v6.6.0 com sincroniza√ß√£o funcionando!');
        }
        
        // Teste de notifica√ß√µes m√∫ltiplas
        function testarNotificacaoToast() {
            Notifications.mostrarNotificacaoToast('Sistema h√≠brido', 'success');
            setTimeout(() => Notifications.mostrarNotificacaoToast('Sincroniza√ß√£o bidirecional', 'info'), 500);
            setTimeout(() => Notifications.mostrarNotificacaoToast('v6.6.0 funcionando!', 'success'), 1000);
        }
        
        // ‚úÖ LOG INICIAL E INICIALIZA√á√ÉO v6.6.0
        console.log('üîÑ Sistema H√≠brido v6.6.0 - Carregamento completo!');
        console.log('üì¶ M√≥dulos base + agenda pessoal + sincroniza√ß√£o carregados');
        
        // ‚úÖ INICIALIZA√á√ÉO AUTOM√ÅTICA v6.6.0
        setTimeout(() => {
            Notifications.success('üîÑ Sistema h√≠brido v6.6.0 com sincroniza√ß√£o inicializado!');
            
            // Inicializar dados se necess√°rio
            if (typeof App !== 'undefined' && typeof DataStructure !== 'undefined') {
                if (!App.dados) {
                    App.dados = DataStructure.inicializarDados();
                }
                if (!App.usuarioAtual) {
                    App.usuarioAtual = { email: 'admin@sistema.com', displayName: 'Isabella' };
                }
                console.log('üìä Dados inicializados para sistema h√≠brido v6.6.0');
            }
            
            // Status inicial da agenda
            setTimeout(() => {
                const resultado = document.getElementById('resultadoAgenda');
                if (resultado) {
                    resultado.innerHTML = '‚úÖ Sistema h√≠brido v6.6.0 com sincroniza√ß√£o inicializado!<br>';
                    resultado.innerHTML += 'üìã Agenda pessoal pronta para uso<br>';
                    resultado.innerHTML += 'üîÑ Sincroniza√ß√£o bidirecional ativa<br>';
                    resultado.innerHTML += 'üéØ Clique em "Abrir Minha Agenda" para testar<br>';
                }
            }, 1000);
            
            // Inicializar estat√≠sticas
            setTimeout(atualizarEstatisticasHybrid, 2000);
            
        }, 1000);
        
        // Atualizar estat√≠sticas a cada 30 segundos
        setInterval(atualizarEstatisticasHybrid, 30000);
        
        // ‚úÖ INTEGRA√á√ÉO AUTOM√ÅTICA v6.6.0
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üîÑ Inicializando integra√ß√µes v6.6.0...');
            
            // Aguardar carregamento completo
            setTimeout(() => {
                // Integrar PersonalAgenda
                if (typeof PersonalAgenda !== 'undefined' && typeof PersonalAgenda._integrarHybridSync === 'function') {
                    PersonalAgenda._integrarHybridSync();
                }
                
                // Verificar se HybridSync est√° funcionando
                if (typeof HybridSync !== 'undefined') {
                    const status = HybridSync.obterStatus();
                    console.log('üìä Status HybridSync:', status);
                    
                    // Mostrar notifica√ß√£o de sucesso
                    if (typeof Notifications !== 'undefined') {
                        Notifications.success('üîÑ Sistema de sincroniza√ß√£o v6.6.0 ativo!');
                    }
                }
                
                // Inicializar estat√≠sticas
                atualizarEstatisticasHybrid();
                
            }, 3000);
        });
    </script>
</body>
</html>
