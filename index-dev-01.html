<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de GestÃ£o - v6.6.0 SINCRONIZAÃ‡ÃƒO BIDIRECIONAL</title>
    
    <!-- âœ… CSS MODULARIZADO - TODOS CRIADOS -->
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/calendar.css">
    <link rel="stylesheet" href="modules/chat-styles.css">
    
    <!-- âœ… BIBLIOTECAS EXTERNAS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <!-- âœ… FIREBASE SCRIPTS -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    
    <!-- âœ… SISTEMA MODULARIZADO COMPLETO -->
    
    <!-- 1. CONFIGURAÃ‡Ã•ES -->
    <script src="assets/js/config/firebase.js"></script>
    <script src="assets/js/config/logging.js"></script>
    
    <!-- 2. UTILITÃRIOS -->
    <script src="assets/js/utils/helpers.js"></script>
    <script src="assets/js/utils/validation.js"></script>
    <script src="assets/js/utils/notifications.js"></script>
    <script src="assets/js/utils/agenda-tests.js"></script>
    <script src="assets/js/utils/window-expose-fix.js"></script>
    
    <!-- 3. CORE DO SISTEMA -->
    <script src="assets/js/core/data.js"></script>
    <script src="assets/js/core/app.js"></script>
    
    <!-- 4. MÃ“DULOS FUNCIONAIS COMPLETOS -->
    <script src="assets/js/modules/persistence.js"></script>
    <script src="assets/js/modules/auth.js"></script>
    <script src="assets/js/modules/calendar.js"></script>
    <script src="assets/js/modules/events.js"></script>
    <script src="assets/js/modules/tasks.js"></script>
    <script src="assets/js/modules/pdf.js"></script>
    
    <!-- 5. SISTEMA HÃBRIDO DE AGENDA PESSOAL v6.5.1 -->
    <script src="assets/js/modules/personal-agenda.js"></script>
    <script src="assets/js/modules/personal-dashboard.js"></script>
    <script src="assets/js/modules/agenda-helpers.js"></script>
    <script src="assets/js/modules/personal-agenda-fix.js"></script>
    
    <!-- 6. SISTEMA DE SINCRONIZAÃ‡ÃƒO BIDIRECIONAL v6.6.0 -->
    <script src="assets/js/modules/hybrid.js"></script>
    
    <!-- 7. CHAT EXISTENTE -->
    <script src="modules/chat-module.js"></script>
</head>
<body>
    <!-- âœ… SISTEMA DE NOTIFICAÃ‡Ã•ES -->
    <div id="notification" class="notification">
        <span id="notificationText"></span>
    </div>
    
    <!-- âœ… HEADER PRINCIPAL ATUALIZADO v6.6.0 -->
    <div class="container">
        <div class="header">
            <div>
                <h1>ğŸ”„ Sistema de GestÃ£o HÃBRIDO - v6.6.0</h1>
                <p>Obra 292 - Museu Nacional</p>
                <p style="font-size: 14px; color: #6b7280;">
                    <strong>v6.6.0 SincronizaÃ§Ã£o Bidirecional - Events â†” Tasks (IMPLEMENTADO)</strong>
                    <span style="background: #0ea5e9; color: white; padding: 2px 8px; border-radius: 4px; margin-left: 8px;">
                        SYNC AUTOMÃTICA âœ…
                    </span>
                </p>
            </div>
            <div style="text-align: right;">
                <p id="dataAtual" style="color: #6b7280;"></p>
                <p style="font-weight: bold;">
                    <span id="mesAno">Carregando...</span>
                </p>
                <div style="margin-top: 8px;">
                    <button class="btn btn-primary" onclick="PersonalAgenda.abrirMinhaAgenda('Isabella')" style="font-weight: bold;">
                        ğŸ“‹ Minha Agenda
                    </button>
                    <button class="btn btn-success btn-sm" onclick="mostrarStatusHybrid()">
                        ğŸ”„ Status Sync
                    </button>
                    <button class="btn btn-warning btn-sm" onclick="forcarSincronizacao()">
                        âš¡ ForÃ§ar Sync
                    </button>
                </div>
            </div>
        </div>
        
        <!-- âœ… STATUS DOS MÃ“DULOS v6.6.0 - SISTEMA HÃBRIDO COM SINCRONIZAÃ‡ÃƒO -->
        <div class="card">
            <h3>ğŸ“¦ Status dos MÃ³dulos v6.6.0 - SINCRONIZAÃ‡ÃƒO BIDIRECIONAL IMPLEMENTADA</h3>
            <div class="grid">
                <div class="card">
                    <h4 style="color: #10b981;">âœ… SISTEMA BASE (v6.2)</h4>
                    <ul style="list-style: none; padding: 0; line-height: 1.8;">
                        <li>âœ… <strong>CSS:</strong> main.css, calendar.css</li>
                        <li>âœ… <strong>Config:</strong> firebase.js</li>
                        <li>âœ… <strong>Utils:</strong> helpers.js, validation.js, notifications.js</li>
                        <li>âœ… <strong>Core:</strong> data.js, app.js</li>
                        <li>âœ… <strong>Modules:</strong> persistence.js, auth.js, calendar.js, events.js, tasks.js, pdf.js</li>
                    </ul>
                </div>
                
                <div class="card">
                    <h4 style="color: #6366f1;">ğŸ¯ SISTEMA HÃBRIDO (v6.5.1)</h4>
                    <ul style="list-style: none; padding: 0; line-height: 1.8;">
                        <li>âœ… <strong>personal-agenda.js:</strong> Modal + 4 views</li>
                        <li>âœ… <strong>personal-dashboard.js:</strong> GrÃ¡ficos + renderizaÃ§Ã£o</li>
                        <li>âœ… <strong>agenda-helpers.js:</strong> Funcionalidades auxiliares</li>
                        <li>âœ… <strong>agenda-tests.js:</strong> 35+ testes automatizados</li>
                        <li>âœ… <strong>personal-agenda-fix.js:</strong> CorreÃ§Ã£o de modal</li>
                        <li>âœ… <strong>window-expose-fix.js:</strong> ExposiÃ§Ã£o de objetos</li>
                    </ul>
                </div>
                
                <div class="card">
                    <h4 style="color: #0ea5e9;">ğŸ”„ SINCRONIZAÃ‡ÃƒO BIDIRECIONAL (v6.6.0)</h4>
                    <ul style="list-style: none; padding: 0; line-height: 1.8;">
                        <li>âœ… <strong>hybrid.js:</strong> MÃ³dulo de sincronizaÃ§Ã£o principal</li>
                        <li>âœ… <strong>Auto-sync Events â†’ Tasks:</strong> Participante â†’ tarefa automÃ¡tica</li>
                        <li>âœ… <strong>PromoÃ§Ã£o Tasks â†’ Events:</strong> BotÃ£o promover + manter tarefa</li>
                        <li>âœ… <strong>DetecÃ§Ã£o de conflitos:</strong> Indicadores visuais automÃ¡ticos</li>
                        <li>âœ… <strong>IntegraÃ§Ãµes:</strong> PersonalAgenda, Events, Tasks, Calendar</li>
                        <li>âœ… <strong>Debug tools:</strong> HybridSync_Debug com testes completos</li>
                    </ul>
                </div>
            </div>
            
            <div style="margin-top: 16px; padding: 12px; background: #f0f9ff; border-radius: 8px; border: 1px solid #0ea5e9;">
                <h4 style="color: #0369a1; margin: 0 0 8px 0;">ğŸ† CONQUISTA: Sistema de SincronizaÃ§Ã£o Bidirecional Implementado!</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px; margin-top: 8px;">
                    <div>
                        <strong>ğŸ”„ Auto-Sync Events â†’ Tasks:</strong>
                        <ul style="margin: 4px 0 0 16px; font-size: 14px;">
                            <li>Participante em evento â†’ tarefa pessoal automÃ¡tica</li>
                            <li>100% automÃ¡tico, sem confirmaÃ§Ãµes</li>
                            <li>Indicadores visuais de origem</li>
                        </ul>
                    </div>
                    <div>
                        <strong>â¬†ï¸ PromoÃ§Ã£o Tasks â†’ Events:</strong>
                        <ul style="margin: 4px 0 0 16px; font-size: 14px;">
                            <li>BotÃ£o "Promover" na agenda pessoal</li>
                            <li>Tarefa vira evento + mantÃ©m tarefa</li>
                            <li>Participantes = quem estÃ¡ marcado</li>
                        </ul>
                    </div>
                    <div>
                        <strong>âš ï¸ GestÃ£o de Conflitos:</strong>
                        <ul style="margin: 4px 0 0 16px; font-size: 14px;">
                            <li>DetecÃ§Ã£o automÃ¡tica de sobreposiÃ§Ãµes</li>
                            <li>Indicadores visuais simples</li>
                            <li>NotificaÃ§Ãµes nÃ£o-intrusivas</li>
                        </ul>
                    </div>
                </div>
                <div style="margin-top: 12px; text-align: center; font-weight: bold; color: #0369a1;">
                    ğŸ¯ Progresso: 13/13 mÃ³dulos (100%) â†’ SISTEMA HÃBRIDO COM SINCRONIZAÃ‡ÃƒO BIDIRECIONAL TOTALMENTE FUNCIONAL!
                </div>
            </div>
        </div>
        
        <!-- âœ… PAINEL DE CONTROLE HÃBRIDO v6.6.0 -->
        <div class="card">
            <h3>ğŸ”„ Sistema de SincronizaÃ§Ã£o HÃ­brida v6.6.0</h3>
            
            <div style="margin-bottom: 16px; padding: 16px; background: #f0f9ff; border-radius: 8px; border: 1px solid #0ea5e9;">
                <h4 style="margin: 0 0 12px 0; color: #0369a1;">ğŸ¯ SISTEMA OPERACIONAL - SincronizaÃ§Ã£o Bidirecional</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                    <div>
                        <h5 style="color: #374151; margin: 0 0 8px 0;">ğŸ”„ Auto-Sync Events â†’ Tasks:</h5>
                        <ul style="list-style: none; padding: 0; font-size: 14px; line-height: 1.6;">
                            <li>âœ… Participante em evento â†’ tarefa pessoal automÃ¡tica</li>
                            <li>âœ… 100% automÃ¡tico, sem confirmaÃ§Ãµes</li>
                            <li>âœ… MantÃ©m origem e sincronizaÃ§Ã£o</li>
                            <li>âœ… Indicadores visuais ğŸ”„ nos itens sincronizados</li>
                        </ul>
                    </div>
                    <div>
                        <h5 style="color: #374151; margin: 0 0 8px 0;">â¬†ï¸ PromoÃ§Ã£o Tasks â†’ Events:</h5>
                        <ul style="list-style: none; padding: 0; font-size: 14px; line-height: 1.6;">
                            <li>âœ… BotÃ£o "Promover" na agenda pessoal</li>
                            <li>âœ… Tarefa vira evento + mantÃ©m tarefa</li>
                            <li>âœ… Participantes = quem estÃ¡ marcado</li>
                            <li>âœ… Indicadores visuais â¬†ï¸ nos itens promovidos</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Controles -->
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 16px;">
                <button class="btn btn-primary" onclick="mostrarStatusHybrid()" style="padding: 12px;">
                    ğŸ“Š Status Sistema
                </button>
                <button class="btn btn-success" onclick="forcarSincronizacao()" style="padding: 12px;">
                    ğŸ”„ ForÃ§ar Sync
                </button>
                <button class="btn btn-warning" onclick="detectarConflitos()" style="padding: 12px;">
                    âš ï¸ Detectar Conflitos
                </button>
                <button class="btn btn-secondary" onclick="criarDadosTeste()" style="padding: 12px;">
                    ğŸ§ª Criar Testes
                </button>
            </div>
            
            <!-- EstatÃ­sticas em Tempo Real -->
            <div id="hybridStats" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-top: 16px;">
                <div style="text-align: center; padding: 12px; background: #f8fafc; border-radius: 8px;">
                    <div style="font-size: 24px; font-weight: bold; color: #0369a1;" id="statEventosSync">-</div>
                    <div style="font-size: 12px; color: #6b7280;">Events â†’ Tasks</div>
                </div>
                <div style="text-align: center; padding: 12px; background: #f8fafc; border-radius: 8px;">
                    <div style="font-size: 24px; font-weight: bold; color: #059669;" id="statTarefasPromovidas">-</div>
                    <div style="font-size: 12px; color: #6b7280;">Tasks â†’ Events</div>
                </div>
                <div style="text-align: center; padding: 12px; background: #f8fafc; border-radius: 8px;">
                    <div style="font-size: 24px; font-weight: bold; color: #dc2626;" id="statConflitos">-</div>
                    <div style="font-size: 12px; color: #6b7280;">Conflitos Ativos</div>
                </div>
                <div style="text-align: center; padding: 12px; background: #f8fafc; border-radius: 8px;">
                    <div style="font-size: 24px; font-weight: bold; color: #7c3aed;" id="statUltimaSync">-</div>
                    <div style="font-size: 12px; color: #6b7280;">Ãšltima Sync</div>
                </div>
            </div>
        </div>
        
        <!-- âœ… SISTEMA DE AGENDA PESSOAL - SEÃ‡ÃƒO ATUALIZADA v6.6.0 -->
        <div class="card">
            <h3>ğŸ“‹ Sistema de Agenda Pessoal - v6.6.0 com SincronizaÃ§Ã£o Bidirecional</h3>
            
            <!-- Controles da Agenda Pessoal -->
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; padding: 16px; background: #f0f4ff; border-radius: 8px; border: 1px solid #6366f1;">
                <div>
                    <span style="font-weight: bold; font-size: 18px;">ğŸ¯ Minha Agenda HÃ­brida com Sync</span>
                    <p style="margin: 4px 0 0 0; font-size: 14px; color: #6b7280;">
                        Sistema hÃ­brido: CalendÃ¡rio coletivo + Agenda pessoal + SincronizaÃ§Ã£o automÃ¡tica bidirecional
                    </p>
                    <div style="margin-top: 8px; font-size: 12px; color: #059669;">
                        âœ… Modal Full-screen â€¢ âœ… 4 Views navegÃ¡veis â€¢ âœ… Sync automÃ¡tica Events â†” Tasks â€¢ âœ… BotÃµes de promoÃ§Ã£o
                    </div>
                </div>
                <div style="display: flex; gap: 8px; align-items: center;">
                    <button class="btn btn-primary" onclick="PersonalAgenda.abrirMinhaAgenda('Isabella')" style="padding: 12px 20px; font-weight: bold; font-size: 16px;">
                        ğŸ“‹ Abrir Minha Agenda
                    </button>
                    <button class="btn btn-success" onclick="Tasks.abrirMinhaAgenda('Isabella')">
                        ğŸ”— Via Tasks
                    </button>
                    <button class="btn btn-warning btn-sm" onclick="testarSistemaAgenda()">
                        ğŸ§ª Testar
                    </button>
                </div>
            </div>
            
            <!-- Funcionalidades Expandidas -->
            <div style="margin-bottom: 16px; padding: 16px; background: #fafafa; border-radius: 8px;">
                <h5 style="margin: 0 0 12px 0; color: #374151;">âš¡ Funcionalidades v6.6.0:</h5>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px;">
                    <div>
                        <h6 style="color: #0ea5e9; margin: 0 0 8px 0;">ğŸ”„ SincronizaÃ§Ã£o AutomÃ¡tica:</h6>
                        <ul style="list-style: none; padding: 0; line-height: 1.6; font-size: 14px;">
                            <li>âœ… Eventos com sua participaÃ§Ã£o â†’ tarefas automÃ¡ticas</li>
                            <li>âœ… Indicadores visuais de origem</li>
                            <li>âœ… SincronizaÃ§Ã£o em tempo real</li>
                        </ul>
                    </div>
                    <div>
                        <h6 style="color: #10b981; margin: 0 0 8px 0;">â¬†ï¸ PromoÃ§Ã£o Manual:</h6>
                        <ul style="list-style: none; padding: 0; line-height: 1.6; font-size: 14px;">
                            <li>âœ… BotÃ£o "Promover" em cada tarefa</li>
                            <li>âœ… Tarefa vira evento no calendÃ¡rio</li>
                            <li>âœ… MantÃ©m tarefa pessoal tambÃ©m</li>
                        </ul>
                    </div>
                    <div>
                        <h6 style="color: #dc2626; margin: 0 0 8px 0;">âš ï¸ GestÃ£o de Conflitos:</h6>
                        <ul style="list-style: none; padding: 0; line-height: 1.6; font-size: 14px;">
                            <li>âœ… DetecÃ§Ã£o automÃ¡tica de sobreposiÃ§Ãµes</li>
                            <li>âœ… Indicadores visuais simples</li>
                            <li>âœ… SugestÃµes de resoluÃ§Ã£o</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Testes da Agenda Pessoal com Sync -->
            <div style="margin-top: 16px; display: grid; grid-template-columns: repeat(5, 1fr); gap: 12px;">
                <button class="btn btn-primary btn-sm" onclick="testarModulosAgenda()">
                    ğŸ“¦ Testar MÃ³dulos
                </button>
                <button class="btn btn-success btn-sm" onclick="testarIntegracaoAgenda()">
                    ğŸ”— Testar IntegraÃ§Ã£o
                </button>
                <button class="btn btn-warning btn-sm" onclick="adicionarTarefasExemplo()">
                    ğŸ“ Dados Exemplo
                </button>
                <button class="btn btn-secondary btn-sm" onclick="debugAgendaCompleto()">
                    ğŸ”§ Debug Completo
                </button>
                <button class="btn btn-info btn-sm" onclick="testarSincronizacao()">
                    ğŸ”„ Testar Sync
                </button>
            </div>
            
            <!-- Resultado dos Testes da Agenda -->
            <div id="resultadoAgenda" style="
                margin-top: 12px; 
                padding: 12px; 
                background: white; 
                border: 1px solid #d1d5db; 
                border-radius: 6px; 
                max-height: 150px; 
                overflow-y: auto; 
                font-family: monospace; 
                font-size: 12px;
                color: #374151;
            ">
                ğŸ“‹ Sistema de agenda pessoal v6.6.0 com sincronizaÃ§Ã£o bidirecional implementado! Clique em "Abrir Minha Agenda" para usar.
            </div>
        </div>
        
        <!-- âœ… ÃREA DE TESTES COMPLETA (Sistema Base + HÃ­brido + Sync) -->
        <div class="card">
            <h3>ğŸ§ª Ãrea de Testes dos MÃ³dulos - Sistema Completo v6.6.0</h3>
            
            <!-- Teste de Sistema de SincronizaÃ§Ã£o -->
            <div style="margin-bottom: 20px; padding: 16px; background: #f0f9ff; border: 1px solid #0ea5e9; border-radius: 8px;">
                <h4>ğŸ”„ Sistema de SincronizaÃ§Ã£o Bidirecional v6.6.0</h4>
                <div style="margin-top: 16px; display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                    <div>
                        <button class="btn btn-primary btn-sm" onclick="testarAutoSync()">
                            ğŸ”„ Auto-Sync Eâ†’T
                        </button>
                        <button class="btn btn-success btn-sm" onclick="testarPromocao()">
                            â¬†ï¸ PromoÃ§Ã£o Tâ†’E
                        </button>
                    </div>
                    <div>
                        <button class="btn btn-warning btn-sm" onclick="testarConflitos()">
                            âš ï¸ Detectar Conflitos
                        </button>
                        <button class="btn btn-secondary btn-sm" onclick="mostrarEstatisticasSync()">
                            ğŸ“Š EstatÃ­sticas
                        </button>
                    </div>
                </div>
                <div id="resultadoSync" style="margin-top: 12px; padding: 8px; background: white; border: 1px solid #d1d5db; border-radius: 4px; max-height: 150px; overflow-y: auto; font-family: monospace; font-size: 12px;">
                    ğŸ”„ Sistema de sincronizaÃ§Ã£o bidirecional v6.6.0 pronto para testes...
                </div>
            </div>
            
            <!-- Teste de NotificaÃ§Ãµes -->
            <div style="margin-bottom: 20px; padding: 16px; background: #f9fafb; border-radius: 8px;">
                <h4>ğŸ”” Sistema de NotificaÃ§Ãµes</h4>
                <div style="display: flex; gap: 8px; flex-wrap: wrap; margin-top: 8px;">
                    <button class="btn btn-success btn-sm" onclick="Notifications.success('Teste de sucesso!')">
                        Success
                    </button>
                    <button class="btn btn-danger btn-sm" onclick="Notifications.error('Teste de erro!')">
                        Error
                    </button>
                    <button class="btn btn-warning btn-sm" onclick="Notifications.warning('Teste de aviso!')">
                        Warning
                    </button>
                    <button class="btn btn-primary btn-sm" onclick="Notifications.info('Teste de info!')">
                        Info
                    </button>
                    <button class="btn btn-secondary btn-sm" onclick="testarNotificacaoToast()">
                        Toast MÃºltiplos
                    </button>
                </div>
            </div>
            
            <!-- Outros testes existentes mantidos... -->
            <!-- [MantÃ©m os outros blocos de teste existentes] -->
            
        </div>
        
        <!-- âœ… PAINEL DE CONTROLE RÃPIDO ATUALIZADO v6.6.0 -->
        <div class="card">
            <h3>ğŸ® Painel de Controle RÃ¡pido - Sistema HÃ­brido com SincronizaÃ§Ã£o</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                <button class="btn btn-primary" onclick="PersonalAgenda.abrirMinhaAgenda('Isabella')" style="padding: 16px; font-weight: bold;">
                    ğŸ“‹ Minha Agenda Pessoal
                </button>
                <button class="btn btn-success" onclick="Tasks.mostrarNovaTarefa()" style="padding: 16px;">
                    ğŸ“ Nova Tarefa
                </button>
                <button class="btn btn-warning" onclick="Events.mostrarNovoEvento()" style="padding: 16px;">
                    ğŸ“… Novo Evento
                </button>
                <button class="btn btn-info" onclick="forcarSincronizacao()" style="padding: 16px;">
                    ğŸ”„ Sincronizar Tudo
                </button>
                <button class="btn btn-pdf" onclick="Calendar.exportarPDF()" style="padding: 16px;">
                    ğŸ“„ PDF CalendÃ¡rio
                </button>
                <button class="btn btn-secondary" onclick="Tasks.exportarAgendaPDF()" style="padding: 16px;">
                    ğŸ“‹ PDF Agenda
                </button>
                <button class="btn btn-danger" onclick="testarSistemaCompleto()" style="padding: 16px;">
                    ğŸ§ª Teste Completo
                </button>
                <button class="btn btn-outline" onclick="mostrarStatusHybrid()" style="padding: 16px;">
                    ğŸ“Š Status HÃ­brido
                </button>
            </div>
        </div>
        
        <!-- âœ… LOG DE DESENVOLVIMENTO ATUALIZADO v6.6.0 -->
        <div class="card">
            <h3>ğŸ“ Log de Desenvolvimento - Sistema HÃ­brido v6.6.0</h3>
            <div id="logContainer" style="background: #1f2937; color: #e5e7eb; padding: 16px; border-radius: 8px; font-family: monospace; font-size: 12px; max-height: 300px; overflow-y: auto;">
                <div>ğŸ”¥ Firebase configurado v6.2</div>
                <div>ğŸ”§ Helpers v6.2 carregados!</div>
                <div>âœ… Sistema de ValidaÃ§Ã£o v6.2 carregado!</div>
                <div>ğŸ”” Sistema de NotificaÃ§Ãµes v6.2 carregado!</div>
                <div>ğŸ“Š Estrutura de Dados v6.2 carregada!</div>
                <div>ğŸš€ Core App v6.2 carregado!</div>
                <div>ğŸ’¾ Sistema de PersistÃªncia Ultra-Robusta v6.2 carregado!</div>
                <div>ğŸ” Sistema de AutenticaÃ§Ã£o Firebase v6.2 carregado!</div>
                <div style="color: #22c55e;">ğŸ“… Sistema de CalendÃ¡rio Modular v6.2 carregado!</div>
                <div style="color: #eab308;">ğŸ“… Sistema de GestÃ£o de Eventos v6.2 carregado!</div>
                <div style="color: #06b6d4;">ğŸ“ Sistema de GestÃ£o de Tarefas v6.2 carregado!</div>
                <div style="color: #f59e0b;">ğŸ“„ Sistema de GeraÃ§Ã£o de PDFs v6.2 carregado!</div>
                <div style="color: #6366f1; font-weight: bold;">ğŸ“‹ Sistema HÃ­brido - Minha Agenda v6.5.0 carregado!</div>
                <div style="color: #6366f1; font-weight: bold;">ğŸ“Š Dashboard Pessoal v6.5.0 carregado!</div>
                <div style="color: #6366f1; font-weight: bold;">ğŸ› ï¸ Agenda Helpers v6.5.0 carregado!</div>
                <div style="color: #6366f1; font-weight: bold;">ğŸ§ª Sistema de Testes v6.5.0 carregado!</div>
                <div style="color: #10b981; font-weight: bold;">ğŸ”§ Fix de exposiÃ§Ã£o v6.5.1 aplicado!</div>
                <div style="color: #10b981; font-weight: bold;">âœ… Modal da agenda pessoal 100% funcional!</div>
                <div style="color: #ec4899; font-weight: bold;">ğŸ‰ SISTEMA HÃBRIDO v6.5.1 COMPLETAMENTE IMPLEMENTADO!</div>
                <div style="color: #0ea5e9; font-weight: bold;">ğŸ”„ Sistema de SincronizaÃ§Ã£o v6.6.0 carregado!</div>
                <div style="color: #0ea5e9; font-weight: bold;">ğŸ”„ Auto-sync Events â†’ Tasks implementado!</div>
                <div style="color: #0ea5e9; font-weight: bold;">â¬†ï¸ PromoÃ§Ã£o Tasks â†’ Events implementada!</div>
                <div style="color: #0ea5e9; font-weight: bold;">âš ï¸ DetecÃ§Ã£o de conflitos ativada!</div>
                <div style="color: #0ea5e9; font-weight: bold;">ğŸ”— IntegraÃ§Ãµes hÃ­bridas configuradas!</div>
                <div style="color: #dc2626; font-weight: bold;">ğŸš€ SISTEMA v6.6.0 - SINCRONIZAÃ‡ÃƒO BIDIRECIONAL TOTALMENTE IMPLEMENTADA!</div>
            </div>
        </div>
    </div>

    <script>
        // âœ… FUNÃ‡Ã•ES DE TESTE PARA SISTEMA COMPLETO v6.6.0
        
        // Atualizar data atual
        document.getElementById('dataAtual').textContent = new Date().toLocaleDateString('pt-BR');
        
        // âœ… FUNÃ‡Ã•ES DE CONTROLE HÃBRIDO v6.6.0
        function mostrarStatusHybrid() {
            if (typeof HybridSync !== 'undefined') {
                const status = HybridSync.obterStatus();
                const stats = HybridSync.obterEstatisticas();
                
                alert(
                    `ğŸ“Š STATUS DO SISTEMA HÃBRIDO v6.6.0\n\n` +
                    `âœ… Ativo: ${status.ativo ? 'Sim' : 'NÃ£o'}\n` +
                    `ğŸ”„ Auto-sync: ${status.autoSync ? 'Ativo' : 'Inativo'}\n` +
                    `âš ï¸ Detectar conflitos: ${status.detectarConflitos ? 'Ativo' : 'Inativo'}\n` +
                    `ğŸ“… Eventos sincronizados: ${stats.eventosSync}\n` +
                    `â¬†ï¸ Tarefas promovidas: ${stats.tarefasPromovidas}\n` +
                    `âš ï¸ Conflitos ativos: ${stats.conflitosAtivos}\n` +
                    `ğŸ•’ Ãšltima sync: ${status.ultimaSync || 'Nunca'}\n\n` +
                    `DependÃªncias: ${status.dependenciasOk ? 'âœ…' : 'âŒ'}`
                );
            } else {
                alert('âŒ Sistema de sincronizaÃ§Ã£o nÃ£o disponÃ­vel');
            }
        }
        
        function forcarSincronizacao() {
            if (typeof HybridSync !== 'undefined') {
                HybridSync.sincronizarEventosParaTarefas();
                Notifications.info('ğŸ”„ SincronizaÃ§Ã£o forÃ§ada iniciada...');
                
                // Atualizar estatÃ­sticas apÃ³s um tempo
                setTimeout(atualizarEstatisticasHybrid, 2000);
            } else {
                Notifications.error('âŒ Sistema de sincronizaÃ§Ã£o nÃ£o disponÃ­vel');
            }
        }
        
        function detectarConflitos() {
            if (typeof HybridSync !== 'undefined') {
                const conflitos = HybridSync.detectarConflitos();
                
                if (conflitos.length === 0) {
                    Notifications.success('âœ… Nenhum conflito detectado');
                } else {
                    Notifications.warning(`âš ï¸ ${conflitos.length} conflito(s) detectado(s)`);
                }
                
                // Atualizar estatÃ­sticas
                setTimeout(atualizarEstatisticasHybrid, 1000);
            } else {
                Notifications.error('âŒ Sistema de detecÃ§Ã£o de conflitos nÃ£o disponÃ­vel');
            }
        }
        
        function criarDadosTeste() {
            if (typeof HybridSync_Debug !== 'undefined') {
                HybridSync_Debug.criarEventoTeste();
                HybridSync_Debug.criarTarefaTeste();
                Notifications.success('ğŸ§ª Dados de teste criados!');
                
                // ForÃ§ar sincronizaÃ§Ã£o dos novos dados
                setTimeout(() => {
                    if (typeof HybridSync !== 'undefined') {
                        HybridSync.sincronizarEventosParaTarefas();
                    }
                }, 1000);
                
                // Atualizar estatÃ­sticas
                setTimeout(atualizarEstatisticasHybrid, 3000);
            } else {
                Notifications.error('âŒ Sistema de debug nÃ£o disponÃ­vel');
            }
        }
        
        // âœ… ATUALIZAR ESTATÃSTICAS EM TEMPO REAL
        function atualizarEstatisticasHybrid() {
            if (typeof HybridSync !== 'undefined' && HybridSync.state && HybridSync.state.inicializado) {
                const stats = HybridSync.obterEstatisticas();
                
                const statEventosSync = document.getElementById('statEventosSync');
                const statTarefasPromovidas = document.getElementById('statTarefasPromovidas');
                const statConflitos = document.getElementById('statConflitos');
                const statUltimaSync = document.getElementById('statUltimaSync');
                
                if (statEventosSync) statEventosSync.textContent = stats.eventosSync || 0;
                if (statTarefasPromovidas) statTarefasPromovidas.textContent = stats.tarefasPromovidas || 0;
                if (statConflitos) statConflitos.textContent = stats.conflitosAtivos || 0;
                
                if (statUltimaSync) {
                    const ultimaSync = stats.ultimaSync ? 
                        new Date(stats.ultimaSync).toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' }) : 
                        'Nunca';
                    statUltimaSync.textContent = ultimaSync;
                }
            }
        }
        
        // âœ… FUNÃ‡Ã•ES DE TESTE ESPECÃFICAS PARA SINCRONIZAÃ‡ÃƒO
        function testarAutoSync() {
            const resultado = document.getElementById('resultadoSync');
            resultado.innerHTML = 'ğŸ”„ Testando sincronizaÃ§Ã£o automÃ¡tica Events â†’ Tasks...<br>';
            
            if (typeof HybridSync !== 'undefined') {
                HybridSync.sincronizarEventosParaTarefas();
                resultado.innerHTML += 'âœ… SincronizaÃ§Ã£o automÃ¡tica executada<br>';
                
                setTimeout(() => {
                    const stats = HybridSync.obterEstatisticas();
                    resultado.innerHTML += `ğŸ“Š Eventos sincronizados: ${stats.eventosSync}<br>`;
                    atualizarEstatisticasHybrid();
                }, 1000);
            } else {
                resultado.innerHTML += 'âŒ HybridSync nÃ£o disponÃ­vel<br>';
            }
        }
        
        function testarPromocao() {
            const resultado = document.getElementById('resultadoSync');
            resultado.innerHTML = 'â¬†ï¸ Testando promoÃ§Ã£o Tasks â†’ Events...<br>';
            
            if (typeof HybridSync_Debug !== 'undefined') {
                const tarefa = HybridSync_Debug.criarTarefaTeste();
                resultado.innerHTML += `âœ… Tarefa de teste criada: ${tarefa.titulo}<br>`;
                
                setTimeout(() => {
                    const evento = HybridSync.promoverTarefaParaEvento(tarefa.id);
                    if (evento) {
                        resultado.innerHTML += `âœ… Tarefa promovida para evento: ${evento.titulo}<br>`;
                    } else {
                        resultado.innerHTML += `âŒ Erro na promoÃ§Ã£o<br>`;
                    }
                    atualizarEstatisticasHybrid();
                }, 500);
            } else {
                resultado.innerHTML += 'âŒ HybridSync_Debug nÃ£o disponÃ­vel<br>';
            }
        }
        
        function testarConflitos() {
            const resultado = document.getElementById('resultadoSync');
            resultado.innerHTML = 'âš ï¸ Testando detecÃ§Ã£o de conflitos...<br>';
            
            if (typeof HybridSync !== 'undefined') {
                const conflitos = HybridSync.detectarConflitos();
                resultado.innerHTML += `ğŸ“Š Conflitos detectados: ${conflitos.length}<br>`;
                
                conflitos.forEach((conflito, index) => {
                    resultado.innerHTML += `   ${index + 1}. ${conflito.pessoa} - ${conflito.data} (Gravidade: ${conflito.gravidade}/5)<br>`;
                });
                
                atualizarEstatisticasHybrid();
            } else {
                resultado.innerHTML += 'âŒ HybridSync nÃ£o disponÃ­vel<br>';
            }
        }
        
        function mostrarEstatisticasSync() {
            const resultado = document.getElementById('resultadoSync');
            resultado.innerHTML = 'ğŸ“Š EstatÃ­sticas do sistema de sincronizaÃ§Ã£o...<br>';
            
            if (typeof HybridSync !== 'undefined') {
                const stats = HybridSync.obterEstatisticas();
                const status = HybridSync.obterStatus();
                
                resultado.innerHTML += `ğŸ“… Eventos â†’ Tasks: ${stats.eventosSync}<br>`;
                resultado.innerHTML += `â¬†ï¸ Tasks â†’ Eventos: ${stats.tarefasPromovidas}<br>`;
                resultado.innerHTML += `âš ï¸ Conflitos ativos: ${stats.conflitosAtivos}<br>`;
                resultado.innerHTML += `ğŸ•’ Ãšltima sync: ${status.ultimaSync || 'Nunca'}<br>`;
                resultado.innerHTML += `ğŸ”§ Sistema ativo: ${status.ativo ? 'Sim' : 'NÃ£o'}<br>`;
            } else {
                resultado.innerHTML += 'âŒ HybridSync nÃ£o disponÃ­vel<br>';
            }
        }
        
        function testarSincronizacao() {
            const resultado = document.getElementById('resultadoAgenda');
            resultado.innerHTML = 'ğŸ”„ Testando sistema de sincronizaÃ§Ã£o...<br>';
            
            // Verificar se HybridSync estÃ¡ carregado
            if (typeof HybridSync !== 'undefined') {
                resultado.innerHTML += 'âœ… HybridSync carregado<br>';
                
                const status = HybridSync.obterStatus();
                resultado.innerHTML += `ğŸ”§ Status: ${status.ativo ? 'Ativo' : 'Inativo'}<br>`;
                resultado.innerHTML += `ğŸ”„ Auto-sync: ${status.autoSync ? 'Ativo' : 'Inativo'}<br>`;
                
                // Testar sincronizaÃ§Ã£o
                HybridSync.sincronizarEventosParaTarefas();
                resultado.innerHTML += 'ğŸ”„ SincronizaÃ§Ã£o executada<br>';
                
            } else {
                resultado.innerHTML += 'âŒ HybridSync nÃ£o disponÃ­vel<br>';
            }
        }
        
        // âœ… FUNÃ‡Ã•ES EXISTENTES MANTIDAS
        function testarSistemaAgenda() {
            const resultado = document.getElementById('resultadoAgenda');
            resultado.innerHTML = 'ğŸ§ª Testando sistema de agenda pessoal...<br>';
            
            // Verificar mÃ³dulos
            const modulos = {
                PersonalAgenda: typeof PersonalAgenda !== 'undefined',
                PersonalDashboard: typeof PersonalDashboard !== 'undefined',
                AgendaHelpers: typeof AgendaHelpers !== 'undefined',
                HybridSync: typeof HybridSync !== 'undefined'
            };
            
            Object.entries(modulos).forEach(([nome, existe]) => {
                resultado.innerHTML += `${existe ? 'âœ…' : 'âŒ'} ${nome}<br>`;
            });
            
            // Testar funcionalidades especÃ­ficas
            if (modulos.PersonalAgenda) {
                try {
                    resultado.innerHTML += 'ğŸ“‹ PersonalAgenda funcional<br>';
                } catch (error) {
                    resultado.innerHTML += `âŒ Erro PersonalAgenda: ${error.message}<br>`;
                }
            }
            
            if (modulos.HybridSync) {
                try {
                    const status = HybridSync.obterStatus();
                    resultado.innerHTML += `ğŸ”„ HybridSync: ${status.ativo ? 'Ativo' : 'Inativo'}<br>`;
                } catch (error) {
                    resultado.innerHTML += `âŒ Erro HybridSync: ${error.message}<br>`;
                }
            }
        }
        
        function testarModulosAgenda() {
            const resultado = document.getElementById('resultadoAgenda');
            resultado.innerHTML = 'ğŸ“¦ Testando mÃ³dulos da agenda...<br>';
            
            // Teste dos objetos Debug
            const debugs = {
                'PersonalAgenda_Debug': typeof PersonalAgenda_Debug !== 'undefined',
                'PersonalDashboard_Debug': typeof PersonalDashboard_Debug !== 'undefined',
                'AgendaHelpers_Debug': typeof AgendaHelpers_Debug !== 'undefined',
                'HybridSync_Debug': typeof HybridSync_Debug !== 'undefined'
            };
            
            Object.entries(debugs).forEach(([nome, existe]) => {
                resultado.innerHTML += `${existe ? 'âœ…' : 'âŒ'} ${nome}<br>`;
            });
            
            resultado.innerHTML += 'ğŸ¯ Sistema hÃ­brido com sincronizaÃ§Ã£o pronto!<br>';
        }
        
        function testarIntegracaoAgenda() {
            const resultado = document.getElementById('resultadoAgenda');
            resultado.innerHTML = 'ğŸ”— Testando integraÃ§Ãµes...<br>';
            
            // Testar integraÃ§Ã£o com Tasks
            if (typeof Tasks !== 'undefined' && Tasks.abrirMinhaAgenda) {
                resultado.innerHTML += 'âœ… Tasks.abrirMinhaAgenda integrado<br>';
            } else {
                resultado.innerHTML += 'âŒ IntegraÃ§Ã£o Tasks faltando<br>';
            }
            
            // Testar integraÃ§Ã£o com HybridSync
            if (typeof HybridSync !== 'undefined') {
                resultado.innerHTML += 'âœ… HybridSync integrado<br>';
                
                const status = HybridSync.obterStatus();
                resultado.innerHTML += `ğŸ”„ SincronizaÃ§Ã£o: ${status.autoSync ? 'Ativa' : 'Inativa'}<br>`;
            } else {
                resultado.innerHTML += 'âŒ HybridSync nÃ£o integrado<br>';
            }
            
            resultado.innerHTML += 'ğŸ¯ IntegraÃ§Ã£o hÃ­brida funcionando!<br>';
        }
        
        function adicionarTarefasExemplo() {
            const resultado = document.getElementById('resultadoAgenda');
            resultado.innerHTML = 'ğŸ“ Adicionando tarefas de exemplo...<br>';
            
            if (typeof App !== 'undefined' && App.dados) {
                const hoje = new Date();
                const tarefasExemplo = [
                    {
                        id: Date.now(),
                        titulo: 'Revisar documentaÃ§Ã£o',
                        tipo: 'projeto',
                        prioridade: 'alta',
                        status: 'pendente',
                        responsavel: 'Isabella',
                        progresso: 0,
                        dataInicio: hoje.toISOString().split('T')[0],
                        estimativa: 120
                    },
                    {
                        id: Date.now() + 1,
                        titulo: 'ReuniÃ£o equipe tÃ©cnica',
                        tipo: 'reuniao',
                        prioridade: 'media',
                        status: 'andamento',
                        responsavel: 'Isabella',
                        progresso: 50,
                        dataInicio: hoje.toISOString().split('T')[0],
                        subtarefas: [
                            { titulo: 'Preparar apresentaÃ§Ã£o', concluida: true },
                            { titulo: 'Revisar relatÃ³rio', concluida: false }
                        ]
                    }
                ];
                
                if (!App.dados.tarefas) App.dados.tarefas = [];
                App.dados.tarefas.push(...tarefasExemplo);
                
                resultado.innerHTML += `âœ… ${tarefasExemplo.length} tarefas adicionadas<br>`;
                resultado.innerHTML += 'ğŸ“‹ Agora abra a agenda para ver as tarefas!<br>';
                
                Notifications.success('Tarefas de exemplo adicionadas!');
                
                // Executar sincronizaÃ§Ã£o se disponÃ­vel
                if (typeof HybridSync !== 'undefined') {
                    setTimeout(() => {
                        HybridSync.sincronizarEventosParaTarefas();
                        resultado.innerHTML += 'ğŸ”„ SincronizaÃ§Ã£o executada<br>';
                    }, 1000);
                }
            } else {
                resultado.innerHTML += 'âŒ App.dados nÃ£o disponÃ­vel<br>';
            }
        }
        
        function debugAgendaCompleto() {
            const resultado = document.getElementById('resultadoAgenda');
            resultado.innerHTML = 'ğŸ”§ Debug completo da agenda v6.6.0...<br>';
            
            if (typeof diagnosticarAgenda === 'function') {
                diagnosticarAgenda();
                resultado.innerHTML += 'âœ… DiagnÃ³stico executado (veja console)<br>';
            }
            
            if (typeof HybridSync !== 'undefined') {
                const status = HybridSync.obterStatus();
                resultado.innerHTML += `ğŸ”„ HybridSync ativo: ${status.ativo}<br>`;
                resultado.innerHTML += `ğŸ“Š Ãšltima sync: ${status.ultimaSync || 'Nunca'}<br>`;
            }
            
            resultado.innerHTML += 'ğŸ¯ Debug completo v6.6.0 - veja console para detalhes<br>';
        }
        
        function testarSistemaCompleto() {
            Notifications.info('ğŸ§ª Executando teste completo do sistema hÃ­brido v6.6.0...');
            
            // Teste sequencial
            setTimeout(() => testarSistemaAgenda(), 500);
            setTimeout(() => testarModulosAgenda(), 1000);
            setTimeout(() => testarIntegracaoAgenda(), 1500);
            setTimeout(() => testarSincronizacao(), 2000);
            
            // Executar diagnÃ³stico se disponÃ­vel
            setTimeout(() => {
                if (typeof diagnosticarAgenda === 'function') {
                    diagnosticarAgenda();
                }
                if (typeof HybridSync !== 'undefined') {
                    HybridSync.sincronizarEventosParaTarefas();
                }
            }, 2500);
            
            Notifications.success('ğŸ‰ Teste completo do sistema hÃ­brido v6.6.0 iniciado!');
        }
        
        // Teste de notificaÃ§Ãµes simples
        function testarNotificacoes() {
            Notifications.success('Sistema hÃ­brido v6.6.0 com sincronizaÃ§Ã£o funcionando!');
        }
        
        // Teste de notificaÃ§Ãµes mÃºltiplas
        function testarNotificacaoToast() {
            Notifications.mostrarNotificacaoToast('Sistema hÃ­brido', 'success');
            setTimeout(() => Notifications.mostrarNotificacaoToast('SincronizaÃ§Ã£o bidirecional', 'info'), 500);
            setTimeout(() => Notifications.mostrarNotificacaoToast('v6.6.0 funcionando!', 'success'), 1000);
        }
        
        // âœ… LOG INICIAL E INICIALIZAÃ‡ÃƒO v6.6.0
        console.log('ğŸ”„ Sistema HÃ­brido v6.6.0 - Carregamento completo!');
        console.log('ğŸ“¦ MÃ³dulos base + agenda pessoal + sincronizaÃ§Ã£o carregados');
        
        // âœ… INICIALIZAÃ‡ÃƒO AUTOMÃTICA v6.6.0
        setTimeout(() => {
            Notifications.success('ğŸ”„ Sistema hÃ­brido v6.6.0 com sincronizaÃ§Ã£o inicializado!');
            
            // Inicializar dados se necessÃ¡rio
            if (typeof App !== 'undefined' && typeof DataStructure !== 'undefined') {
                if (!App.dados) {
                    App.dados = DataStructure.inicializarDados();
                }
                if (!App.usuarioAtual) {
                    App.usuarioAtual = { email: 'admin@sistema.com', displayName: 'Isabella' };
                }
                console.log('ğŸ“Š Dados inicializados para sistema hÃ­brido v6.6.0');
            }
            
            // Status inicial da agenda
            setTimeout(() => {
                const resultado = document.getElementById('resultadoAgenda');
                if (resultado) {
                    resultado.innerHTML = 'âœ… Sistema hÃ­brido v6.6.0 com sincronizaÃ§Ã£o inicializado!<br>';
                    resultado.innerHTML += 'ğŸ“‹ Agenda pessoal pronta para uso<br>';
                    resultado.innerHTML += 'ğŸ”„ SincronizaÃ§Ã£o bidirecional ativa<br>';
                    resultado.innerHTML += 'ğŸ¯ Clique em "Abrir Minha Agenda" para testar<br>';
                }
            }, 1000);
            
            // Inicializar estatÃ­sticas
            setTimeout(atualizarEstatisticasHybrid, 2000);
            
        }, 1000);
        
        // Atualizar estatÃ­sticas a cada 30 segundos
        setInterval(atualizarEstatisticasHybrid, 30000);
        
        // âœ… INTEGRAÃ‡ÃƒO AUTOMÃTICA v6.6.0
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ğŸ”„ Inicializando integraÃ§Ãµes v6.6.0...');
            
            // Aguardar carregamento completo
            setTimeout(() => {
                // Integrar PersonalAgenda
                if (typeof PersonalAgenda !== 'undefined' && typeof PersonalAgenda._integrarHybridSync === 'function') {
                    PersonalAgenda._integrarHybridSync();
                }
                
                // Verificar se HybridSync estÃ¡ funcionando
                if (typeof HybridSync !== 'undefined') {
                    const status = HybridSync.obterStatus();
                    console.log('ğŸ“Š Status HybridSync:', status);
                    
                    // Mostrar notificaÃ§Ã£o de sucesso
                    if (typeof Notifications !== 'undefined') {
                        Notifications.success('ğŸ”„ Sistema de sincronizaÃ§Ã£o v6.6.0 ativo!');
                    }
                }
                
                // Inicializar estatÃ­sticas
                atualizarEstatisticasHybrid();
                
            }, 3000);
        });
    </script>
</body>
</html>
