<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de GestÃ£o - v6.5.1 HÃBRIDO COMPLETO</title>
    
    <!-- âœ… CSS MODULARIZADO - TODOS CRIADOS -->
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/calendar.css">
    <link rel="stylesheet" href="modules/chat-styles.css">
    
    <!-- âœ… BIBLIOTECAS EXTERNAS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <!-- âœ… FIREBASE SCRIPTS -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    
    <!-- âœ… SISTEMA MODULARIZADO COMPLETO -->
    
    <!-- 1. CONFIGURAÃ‡Ã•ES -->
    <script src="assets/js/config/firebase.js"></script>
    
    <!-- 2. UTILITÃRIOS -->
    <script src="assets/js/utils/helpers.js"></script>
    <script src="assets/js/utils/validation.js"></script>
    <script src="assets/js/utils/notifications.js"></script>
    <script src="assets/js/utils/agenda-tests.js"></script>
    <script src="assets/js/utils/window-expose-fix.js"></script>
    
    <!-- 3. CORE DO SISTEMA -->
    <script src="assets/js/core/data.js"></script>
    <script src="assets/js/core/app.js"></script>
    
    <!-- 4. MÃ“DULOS FUNCIONAIS COMPLETOS -->
    <script src="assets/js/modules/persistence.js"></script>
    <script src="assets/js/modules/auth.js"></script>
    <script src="assets/js/modules/calendar.js"></script>
    <script src="assets/js/modules/events.js"></script>
    <script src="assets/js/modules/tasks.js"></script>
    <script src="assets/js/modules/pdf.js"></script>
    
    <!-- 5. SISTEMA HÃBRIDO DE AGENDA PESSOAL v6.5.1 -->
    <script src="assets/js/modules/personal-agenda.js"></script>
    <script src="assets/js/modules/personal-dashboard.js"></script>
    <script src="assets/js/modules/agenda-helpers.js"></script>
    <script src="assets/js/modules/personal-agenda-fix.js"></script>
    
    <!-- 6. CHAT EXISTENTE -->
    <script src="modules/chat-module.js"></script>
</head>
<body>
    <!-- âœ… SISTEMA DE NOTIFICAÃ‡Ã•ES -->
    <div id="notification" class="notification">
        <span id="notificationText"></span>
    </div>
    
    <!-- âœ… HEADER PRINCIPAL ATUALIZADO v6.5.1 -->
    <div class="container">
        <div class="header">
            <div>
                <h1>ğŸ‰ Sistema de GestÃ£o HÃBRIDO - v6.5.1</h1>
                <p>Obra 292 - Museu Nacional</p>
                <p style="font-size: 14px; color: #6b7280;">
                    <strong>v6.5.1 HÃ­brido - Sistema CalendÃ¡rio + Agenda Pessoal (100% Funcional)</strong>
                    <span style="background: #10b981; color: white; padding: 2px 8px; border-radius: 4px; margin-left: 8px;">
                        AGENDA PESSOAL FUNCIONANDO âœ…
                    </span>
                </p>
            </div>
            <div style="text-align: right;">
                <p id="dataAtual" style="color: #6b7280;"></p>
                <p style="font-weight: bold;">
                    <span id="mesAno">Carregando...</span>
                </p>
                <div style="margin-top: 8px;">
                    <button class="btn btn-primary" onclick="PersonalAgenda.abrirMinhaAgenda('Isabella')" style="font-weight: bold;">
                        ğŸ“‹ Minha Agenda
                    </button>
                    <button class="btn btn-success btn-sm" onclick="testarNotificacoes()">
                        ğŸ”” Teste NotificaÃ§Ãµes
                    </button>
                    <button class="btn btn-warning btn-sm" onclick="testarSistemaCompleto()">
                        ğŸ§ª Teste Geral
                    </button>
                </div>
            </div>
        </div>
        
        <!-- âœ… STATUS DOS MÃ“DULOS v6.5.1 - SISTEMA HÃBRIDO -->
        <div class="card">
            <h3>ğŸ“¦ Status dos MÃ³dulos v6.5.1 - SISTEMA HÃBRIDO COMPLETO</h3>
            <div class="grid">
                <div class="card">
                    <h4 style="color: #10b981;">âœ… SISTEMA BASE (v6.2)</h4>
                    <ul style="list-style: none; padding: 0; line-height: 1.8;">
                        <li>âœ… <strong>CSS:</strong> main.css, calendar.css</li>
                        <li>âœ… <strong>Config:</strong> firebase.js</li>
                        <li>âœ… <strong>Utils:</strong> helpers.js, validation.js, notifications.js</li>
                        <li>âœ… <strong>Core:</strong> data.js, app.js</li>
                        <li>âœ… <strong>Modules:</strong> persistence.js, auth.js, calendar.js, events.js, tasks.js, pdf.js</li>
                    </ul>
                </div>
                
                <div class="card">
                    <h4 style="color: #6366f1;">ğŸ¯ SISTEMA HÃBRIDO NOVO (v6.5.1)</h4>
                    <ul style="list-style: none; padding: 0; line-height: 1.8;">
                        <li>âœ… <strong>personal-agenda.js:</strong> Modal + 4 views</li>
                        <li>âœ… <strong>personal-dashboard.js:</strong> GrÃ¡ficos + renderizaÃ§Ã£o</li>
                        <li>âœ… <strong>agenda-helpers.js:</strong> Funcionalidades auxiliares</li>
                        <li>âœ… <strong>agenda-tests.js:</strong> 35+ testes automatizados</li>
                        <li>âœ… <strong>personal-agenda-fix.js:</strong> CorreÃ§Ã£o de modal</li>
                        <li>âœ… <strong>window-expose-fix.js:</strong> ExposiÃ§Ã£o de objetos</li>
                    </ul>
                </div>
            </div>
            
            <div style="margin-top: 16px; padding: 12px; background: #f0f4ff; border-radius: 8px; border: 1px solid #6366f1;">
                <h4 style="color: #6366f1; margin: 0 0 8px 0;">ğŸ† CONQUISTA: Sistema HÃ­brido Implementado!</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-top: 8px;">
                    <div>
                        <strong>ğŸ“‹ CalendÃ¡rio Coletivo:</strong>
                        <ul style="margin: 4px 0 0 16px; font-size: 14px;">
                            <li>Events.js - GestÃ£o de eventos</li>
                            <li>Calendar.js - VisualizaÃ§Ã£o mensal</li>
                            <li>PDF.js - ExportaÃ§Ã£o calendÃ¡rio</li>
                        </ul>
                    </div>
                    <div>
                        <strong>ğŸ‘¤ Agenda Pessoal:</strong>
                        <ul style="margin: 4px 0 0 16px; font-size: 14px;">
                            <li>PersonalAgenda.js - Modal full-screen</li>
                            <li>4 Views - Dashboard, Lista, Semanal, Kanban</li>
                            <li>IntegraÃ§Ã£o - Tasks.abrirMinhaAgenda()</li>
                        </ul>
                    </div>
                </div>
                <div style="margin-top: 12px; text-align: center; font-weight: bold; color: #059669;">
                    ğŸ¯ Progresso: 12/12 mÃ³dulos (100%) â†’ SISTEMA HÃBRIDO TOTALMENTE FUNCIONAL!
                </div>
            </div>
        </div>
        
        <!-- âœ… SISTEMA DE AGENDA PESSOAL - SEÃ‡ÃƒO PRINCIPAL -->
        <div class="card">
            <h3>ğŸ“‹ Sistema de Agenda Pessoal - IMPLEMENTADO v6.5.1</h3>
            
            <!-- Controles da Agenda Pessoal -->
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; padding: 16px; background: #f0f4ff; border-radius: 8px; border: 1px solid #6366f1;">
                <div>
                    <span style="font-weight: bold; font-size: 18px;">ğŸ¯ Minha Agenda HÃ­brida</span>
                    <p style="margin: 4px 0 0 0; font-size: 14px; color: #6b7280;">
                        Sistema hÃ­brido: CalendÃ¡rio coletivo + Agenda pessoal integrada
                    </p>
                    <div style="margin-top: 8px; font-size: 12px; color: #059669;">
                        âœ… Modal Full-screen â€¢ âœ… 4 Views navegÃ¡veis â€¢ âœ… IntegraÃ§Ã£o perfeita
                    </div>
                </div>
                <div style="display: flex; gap: 8px; align-items: center;">
                    <button class="btn btn-primary" onclick="PersonalAgenda.abrirMinhaAgenda('Isabella')" style="padding: 12px 20px; font-weight: bold; font-size: 16px;">
                        ğŸ“‹ Abrir Minha Agenda
                    </button>
                    <button class="btn btn-success" onclick="Tasks.abrirMinhaAgenda('Isabella')">
                        ğŸ”— Via Tasks
                    </button>
                    <button class="btn btn-warning btn-sm" onclick="testarSistemaAgenda()">
                        ğŸ§ª Testar
                    </button>
                </div>
            </div>
            
            <!-- Views da Agenda -->
            <div style="margin-bottom: 16px; padding: 16px; background: white; border-radius: 8px; border: 1px solid #e5e7eb;">
                <h5 style="margin: 0 0 12px 0; color: #374151;">ğŸ“± Views DisponÃ­veis no Modal:</h5>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px;">
                    <div style="text-align: center; padding: 12px; background: #f8fafc; border-radius: 8px; border: 1px solid #e5e7eb;">
                        <div style="font-size: 24px; margin-bottom: 8px;">ğŸ“Š</div>
                        <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">Dashboard</div>
                        <div style="font-size: 12px; color: #6b7280;">MÃ©tricas pessoais, produtividade</div>
                    </div>
                    <div style="text-align: center; padding: 12px; background: #f8fafc; border-radius: 8px; border: 1px solid #e5e7eb;">
                        <div style="font-size: 24px; margin-bottom: 8px;">ğŸ“</div>
                        <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">Lista</div>
                        <div style="font-size: 12px; color: #6b7280;">Todas as tarefas ordenÃ¡veis</div>
                    </div>
                    <div style="text-align: center; padding: 12px; background: #f8fafc; border-radius: 8px; border: 1px solid #e5e7eb;">
                        <div style="font-size: 24px; margin-bottom: 8px;">ğŸ“…</div>
                        <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">Semanal</div>
                        <div style="font-size: 12px; color: #6b7280;">Por dia da semana</div>
                    </div>
                    <div style="text-align: center; padding: 12px; background: #f8fafc; border-radius: 8px; border: 1px solid #e5e7eb;">
                        <div style="font-size: 24px; margin-bottom: 8px;">ğŸ“‹</div>
                        <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">Kanban</div>
                        <div style="font-size: 12px; color: #6b7280;">Por status (drag & drop)</div>
                    </div>
                </div>
            </div>
            
            <!-- Funcionalidades -->
            <div style="margin-bottom: 16px; padding: 16px; background: #fafafa; border-radius: 8px;">
                <h5 style="margin: 0 0 12px 0; color: #374151;">âš¡ Funcionalidades Implementadas:</h5>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                    <div>
                        <ul style="list-style: none; padding: 0; line-height: 1.6;">
                            <li>âœ… <strong>Modal full-screen responsivo</strong></li>
                            <li>âœ… <strong>4 views navegÃ¡veis</strong></li>
                            <li>âœ… <strong>Filtros por tipo/status/prioridade</strong></li>
                            <li>âœ… <strong>EstatÃ­sticas pessoais</strong></li>
                        </ul>
                    </div>
                    <div>
                        <ul style="list-style: none; padding: 0; line-height: 1.6;">
                            <li>âœ… <strong>IntegraÃ§Ã£o Tasks.abrirMinhaAgenda()</strong></li>
                            <li>âœ… <strong>Drag & Drop no Kanban</strong></li>
                            <li>âœ… <strong>35+ testes automatizados</strong></li>
                            <li>âœ… <strong>Sistema modular sem breaking changes</strong></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Testes da Agenda Pessoal -->
            <div style="margin-top: 16px; display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px;">
                <button class="btn btn-primary btn-sm" onclick="testarModulosAgenda()">
                    ğŸ“¦ Testar MÃ³dulos
                </button>
                <button class="btn btn-success btn-sm" onclick="testarIntegracaoAgenda()">
                    ğŸ”— Testar IntegraÃ§Ã£o
                </button>
                <button class="btn btn-warning btn-sm" onclick="adicionarTarefasExemplo()">
                    ğŸ“ Dados Exemplo
                </button>
                <button class="btn btn-secondary btn-sm" onclick="debugAgendaCompleto()">
                    ğŸ”§ Debug Completo
                </button>
            </div>
            
            <!-- Resultado dos Testes da Agenda -->
            <div id="resultadoAgenda" style="
                margin-top: 12px; 
                padding: 12px; 
                background: white; 
                border: 1px solid #d1d5db; 
                border-radius: 6px; 
                max-height: 150px; 
                overflow-y: auto; 
                font-family: monospace; 
                font-size: 12px;
                color: #374151;
            ">
                ğŸ“‹ Sistema de agenda pessoal implementado e funcionando! Clique em "Abrir Minha Agenda" para usar.
            </div>
        </div>
        
        <!-- âœ… ÃREA DE TESTES COMPLETA (Sistema Base + HÃ­brido) -->
        <div class="card">
            <h3>ğŸ§ª Ãrea de Testes dos MÃ³dulos - Sistema Completo v6.5.1</h3>
            
            <!-- Teste de NotificaÃ§Ãµes -->
            <div style="margin-bottom: 20px; padding: 16px; background: #f9fafb; border-radius: 8px;">
                <h4>ğŸ”” Sistema de NotificaÃ§Ãµes</h4>
                <div style="display: flex; gap: 8px; flex-wrap: wrap; margin-top: 8px;">
                    <button class="btn btn-success btn-sm" onclick="Notifications.success('Teste de sucesso!')">
                        Success
                    </button>
                    <button class="btn btn-danger btn-sm" onclick="Notifications.error('Teste de erro!')">
                        Error
                    </button>
                    <button class="btn btn-warning btn-sm" onclick="Notifications.warning('Teste de aviso!')">
                        Warning
                    </button>
                    <button class="btn btn-primary btn-sm" onclick="Notifications.info('Teste de info!')">
                        Info
                    </button>
                    <button class="btn btn-secondary btn-sm" onclick="testarNotificacaoToast()">
                        Toast MÃºltiplos
                    </button>
                </div>
            </div>
            
            <!-- Teste de Sistema de PDFs -->
            <div style="margin-bottom: 20px; padding: 16px; background: #fef3c7; border: 1px solid #f59e0b; border-radius: 8px;">
                <h4>ğŸ“„ Sistema de GeraÃ§Ã£o de PDFs</h4>
                <div style="margin-top: 16px; display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                    <div>
                        <button class="btn btn-primary btn-sm" onclick="testarModalCalendarioPDF()">
                            ğŸ“… Modal CalendÃ¡rio
                        </button>
                        <button class="btn btn-success btn-sm" onclick="testarModalAgendaPDF()">
                            ğŸ“‹ Modal Agenda
                        </button>
                    </div>
                    <div>
                        <button class="btn btn-warning btn-sm" onclick="testarStatusPDF()">
                            âš™ï¸ Status Sistema
                        </button>
                        <button class="btn btn-secondary btn-sm" onclick="testarDependenciasPDF()">
                            ğŸ”— DependÃªncias
                        </button>
                    </div>
                </div>
                <div id="resultadoPDF" style="margin-top: 12px; padding: 8px; background: white; border: 1px solid #d1d5db; border-radius: 4px; max-height: 150px; overflow-y: auto; font-family: monospace; font-size: 12px;">
                    ğŸ“„ Sistema PDF pronto para testes...
                </div>
            </div>
            
            <!-- Teste de Sistema de Tarefas -->
            <div style="margin-bottom: 20px; padding: 16px; background: #f0f9ff; border: 1px solid #0ea5e9; border-radius: 8px;">
                <h4>ğŸ“ Sistema de GestÃ£o de Tarefas</h4>
                <div style="margin-top: 16px; display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                    <div>
                        <button class="btn btn-primary btn-sm" onclick="testarModalNovaTarefa()">
                            â• Modal Nova Tarefa
                        </button>
                        <button class="btn btn-success btn-sm" onclick="testarBuscaTarefas()">
                            ğŸ” Buscar Tarefas
                        </button>
                    </div>
                    <div>
                        <button class="btn btn-warning btn-sm" onclick="testarEstatisticasTarefas()">
                            ğŸ“Š EstatÃ­sticas
                        </button>
                        <button class="btn btn-secondary btn-sm" onclick="criarTarefaTeste()">
                            ğŸ§ª Criar Teste
                        </button>
                    </div>
                </div>
                <div id="resultadoTasks" style="margin-top: 12px; padding: 8px; background: white; border: 1px solid #d1d5db; border-radius: 4px; max-height: 150px; overflow-y: auto; font-family: monospace; font-size: 12px;">
                    ğŸ“ Sistema de tarefas pronto para testes...
                </div>
            </div>
            
            <!-- Teste de Sistema de Eventos -->
            <div style="margin-bottom: 20px; padding: 16px; background: #fefce8; border: 1px solid #facc15; border-radius: 8px;">
                <h4>ğŸ“… Sistema de GestÃ£o de Eventos</h4>
                <div style="margin-top: 16px; display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                    <div>
                        <button class="btn btn-primary btn-sm" onclick="testarModalNovoEvento()">
                            â• Modal Novo Evento
                        </button>
                        <button class="btn btn-success btn-sm" onclick="testarBuscaEventos()">
                            ğŸ” Buscar Eventos
                        </button>
                    </div>
                    <div>
                        <button class="btn btn-warning btn-sm" onclick="testarEstatisticasEventos()">
                            ğŸ“Š EstatÃ­sticas
                        </button>
                        <button class="btn btn-secondary btn-sm" onclick="criarEventoTeste()">
                            ğŸ§ª Criar Teste
                        </button>
                    </div>
                </div>
                <div id="resultadoEvents" style="margin-top: 12px; padding: 8px; background: white; border: 1px solid #d1d5db; border-radius: 4px; max-height: 150px; overflow-y: auto; font-family: monospace; font-size: 12px;">
                    ğŸ“… Sistema de eventos pronto para testes...
                </div>
            </div>
            
            <!-- Teste de Sistema de CalendÃ¡rio -->
            <div style="margin-bottom: 20px; padding: 16px; background: #f0fdf4; border: 1px solid #22c55e; border-radius: 8px;">
                <h4>ğŸ“… Sistema de CalendÃ¡rio</h4>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <div>
                        <span id="mesAnoCalendario" style="font-weight: bold; font-size: 16px;">Carregando...</span>
                    </div>
                    <div style="display: flex; gap: 8px;">
                        <button class="btn btn-secondary btn-sm" onclick="Calendar.mudarMes(-1)">â—€ Anterior</button>
                        <button class="btn btn-primary btn-sm" onclick="Calendar.irParaHoje()">ğŸ“… Hoje</button>
                        <button class="btn btn-warning btn-sm" onclick="Calendar.mostrarMarcarFeriado()">ğŸ‰ Feriado</button>
                        <button class="btn btn-pdf btn-sm" onclick="Calendar.exportarPDF()">ğŸ“„ Exportar PDF</button>
                        <button class="btn btn-secondary btn-sm" onclick="Calendar.mudarMes(1)">PrÃ³ximo â–¶</button>
                    </div>
                </div>
                <div id="calendario" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 6px; background: white; padding: 12px; border-radius: 8px; border: 1px solid #e5e7eb; max-width: 100%; font-size: 12px;">
                    <div style="text-align: center; color: #6b7280;">Carregando calendÃ¡rio...</div>
                </div>
                <div id="statsCalendario" style="margin-top: 12px; padding: 8px; background: white; border: 1px solid #d1d5db; border-radius: 4px; max-height: 150px; overflow-y: auto; font-family: monospace; font-size: 12px;">
                    ğŸ“ˆ EstatÃ­sticas: Sistema carregado e pronto...
                </div>
            </div>
        </div>
        
        <!-- âœ… PAINEL DE CONTROLE RÃPIDO ATUALIZADO -->
        <div class="card">
            <h3>ğŸ® Painel de Controle RÃ¡pido - Sistema HÃ­brido</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                <button class="btn btn-primary" onclick="PersonalAgenda.abrirMinhaAgenda('Isabella')" style="padding: 16px; font-weight: bold;">
                    ğŸ“‹ Minha Agenda Pessoal
                </button>
                <button class="btn btn-success" onclick="Tasks.mostrarNovaTarefa()" style="padding: 16px;">
                    ğŸ“ Nova Tarefa
                </button>
                <button class="btn btn-warning" onclick="Events.mostrarNovoEvento()" style="padding: 16px;">
                    ğŸ“… Novo Evento
                </button>
                <button class="btn btn-pdf" onclick="Calendar.exportarPDF()" style="padding: 16px;">
                    ğŸ“„ PDF CalendÃ¡rio
                </button>
                <button class="btn btn-secondary" onclick="Tasks.exportarAgendaPDF()" style="padding: 16px;">
                    ğŸ“‹ PDF Agenda
                </button>
                <button class="btn btn-danger" onclick="testarSistemaCompleto()" style="padding: 16px;">
                    ğŸ§ª Teste Completo
                </button>
            </div>
        </div>
        
        <!-- âœ… LOG DE DESENVOLVIMENTO ATUALIZADO -->
        <div class="card">
            <h3>ğŸ“ Log de Desenvolvimento - Sistema HÃ­brido v6.5.1</h3>
            <div id="logContainer" style="background: #1f2937; color: #e5e7eb; padding: 16px; border-radius: 8px; font-family: monospace; font-size: 12px; max-height: 300px; overflow-y: auto;">
                <div>ğŸ”¥ Firebase configurado v6.2</div>
                <div>ğŸ”§ Helpers v6.2 carregados!</div>
                <div>âœ… Sistema de ValidaÃ§Ã£o v6.2 carregado!</div>
                <div>ğŸ”” Sistema de NotificaÃ§Ãµes v6.2 carregado!</div>
                <div>ğŸ“Š Estrutura de Dados v6.2 carregada!</div>
                <div>ğŸš€ Core App v6.2 carregado!</div>
                <div>ğŸ’¾ Sistema de PersistÃªncia Ultra-Robusta v6.2 carregado!</div>
                <div>ğŸ” Sistema de AutenticaÃ§Ã£o Firebase v6.2 carregado!</div>
                <div style="color: #22c55e;">ğŸ“… Sistema de CalendÃ¡rio Modular v6.2 carregado!</div>
                <div style="color: #eab308;">ğŸ“… Sistema de GestÃ£o de Eventos v6.2 carregado!</div>
                <div style="color: #06b6d4;">ğŸ“ Sistema de GestÃ£o de Tarefas v6.2 carregado!</div>
                <div style="color: #f59e0b;">ğŸ“„ Sistema de GeraÃ§Ã£o de PDFs v6.2 carregado!</div>
                <div style="color: #6366f1; font-weight: bold;">ğŸ“‹ Sistema HÃ­brido - Minha Agenda v6.5.0 carregado!</div>
                <div style="color: #6366f1; font-weight: bold;">ğŸ“Š Dashboard Pessoal v6.5.0 carregado!</div>
                <div style="color: #6366f1; font-weight: bold;">ğŸ› ï¸ Agenda Helpers v6.5.0 carregado!</div>
                <div style="color: #6366f1; font-weight: bold;">ğŸ§ª Sistema de Testes v6.5.0 carregado!</div>
                <div style="color: #10b981; font-weight: bold;">ğŸ”§ Fix de exposiÃ§Ã£o v6.5.1 aplicado!</div>
                <div style="color: #10b981; font-weight: bold;">âœ… Modal da agenda pessoal 100% funcional!</div>
                <div style="color: #ec4899; font-weight: bold;">ğŸ‰ SISTEMA HÃBRIDO v6.5.1 COMPLETAMENTE IMPLEMENTADO!</div>
            </div>
        </div>
    </div>

    <script>
        // âœ… FUNÃ‡Ã•ES DE TESTE PARA SISTEMA COMPLETO v6.5.1
        
        // Atualizar data atual
        document.getElementById('dataAtual').textContent = new Date().toLocaleDateString('pt-BR');
        
        // âœ… FUNÃ‡Ã•ES DE TESTE DA AGENDA PESSOAL
        function testarSistemaAgenda() {
            const resultado = document.getElementById('resultadoAgenda');
            resultado.innerHTML = 'ğŸ§ª Testando sistema de agenda pessoal...<br>';
            
            // Verificar mÃ³dulos
            const modulos = {
                PersonalAgenda: typeof PersonalAgenda !== 'undefined',
                PersonalDashboard: typeof PersonalDashboard !== 'undefined',
                AgendaHelpers: typeof AgendaHelpers !== 'undefined'
            };
            
            Object.entries(modulos).forEach(([nome, existe]) => {
                resultado.innerHTML += `${existe ? 'âœ…' : 'âŒ'} ${nome}<br>`;
            });
            
            // Testar funcionalidades
            if (modulos.PersonalAgenda) {
                try {
                    const usuario = PersonalAgenda._obterUsuarioAtual();
                    resultado.innerHTML += `ğŸ‘¤ UsuÃ¡rio: ${usuario}<br>`;
                    
                    const tarefas = PersonalAgenda._obterMinhasTarefas();
                    resultado.innerHTML += `ğŸ“ Tarefas: ${tarefas.length}<br>`;
                    
                    PersonalAgenda._calcularEstatisticasPessoais();
                    const stats = PersonalAgenda.state.estatisticasPessoais;
                    resultado.innerHTML += `ğŸ“Š Stats: ${stats ? 'OK' : 'Erro'}<br>`;
                    
                    resultado.innerHTML += 'âœ… Sistema agenda 100% funcional!<br>';
                } catch (error) {
                    resultado.innerHTML += `âŒ Erro: ${error.message}<br>`;
                }
            }
        }
        
        function testarModulosAgenda() {
            const resultado = document.getElementById('resultadoAgenda');
            resultado.innerHTML = 'ğŸ“¦ Testando mÃ³dulos da agenda...<br>';
            
            // Teste dos objetos Debug
            const debugs = {
                'PersonalAgenda_Debug': typeof PersonalAgenda_Debug !== 'undefined',
                'PersonalDashboard_Debug': typeof PersonalDashboard_Debug !== 'undefined',
                'AgendaHelpers_Debug': typeof AgendaHelpers_Debug !== 'undefined'
            };
            
            Object.entries(debugs).forEach(([nome, existe]) => {
                resultado.innerHTML += `${existe ? 'âœ…' : 'âŒ'} ${nome}<br>`;
            });
            
            // Teste das funÃ§Ãµes globais
            const funcoes = {
                'testarAgendaCompleta': typeof testarAgendaCompleta !== 'undefined',
                'diagnosticarAgenda': typeof diagnosticarAgenda !== 'undefined',
                'testeRapidoAgenda': typeof testeRapidoAgenda !== 'undefined'
            };
            
            Object.entries(funcoes).forEach(([nome, existe]) => {
                resultado.innerHTML += `${existe ? 'âœ…' : 'âŒ'} ${nome}<br>`;
            });
            
            resultado.innerHTML += 'ğŸ¯ Execute: testarAgendaCompleta() para teste completo<br>';
        }
        
        function testarIntegracaoAgenda() {
            const resultado = document.getElementById('resultadoAgenda');
            resultado.innerHTML = 'ğŸ”— Testando integraÃ§Ãµes...<br>';
            
            // Testar integraÃ§Ã£o com Tasks
            if (typeof Tasks !== 'undefined' && Tasks.abrirMinhaAgenda) {
                resultado.innerHTML += 'âœ… Tasks.abrirMinhaAgenda integrado<br>';
            } else {
                resultado.innerHTML += 'âŒ IntegraÃ§Ã£o Tasks faltando<br>';
            }
            
            // Testar integraÃ§Ãµes PersonalAgenda
            const integracoes = [
                '_formatarSemana',
                '_renderizarTarefaMini',
                'navegarSemana',
                'validarDados'
            ];
            
            integracoes.forEach(integracao => {
                if (typeof PersonalAgenda[integracao] === 'function') {
                    resultado.innerHTML += `âœ… PersonalAgenda.${integracao}<br>`;
                } else {
                    resultado.innerHTML += `âŒ PersonalAgenda.${integracao}<br>`;
                }
            });
            
            resultado.innerHTML += 'ğŸ¯ IntegraÃ§Ã£o hÃ­brida funcionando!<br>';
        }
        
        function adicionarTarefasExemplo() {
            const resultado = document.getElementById('resultadoAgenda');
            resultado.innerHTML = 'ğŸ“ Adicionando tarefas de exemplo...<br>';
            
            if (typeof App !== 'undefined' && App.dados) {
                const hoje = new Date();
                const tarefasExemplo = [
                    {
                        id: Date.now(),
                        titulo: 'Revisar documentaÃ§Ã£o',
                        tipo: 'projeto',
                        prioridade: 'alta',
                        status: 'pendente',
                        responsavel: 'Isabella',
                        progresso: 0,
                        dataInicio: hoje.toISOString().split('T')[0],
                        estimativa: 120
                    },
                    {
                        id: Date.now() + 1,
                        titulo: 'ReuniÃ£o equipe tÃ©cnica',
                        tipo: 'reuniao',
                        prioridade: 'media',
                        status: 'andamento',
                        responsavel: 'Isabella',
                        progresso: 50,
                        dataInicio: hoje.toISOString().split('T')[0],
                        subtarefas: [
                            { titulo: 'Preparar apresentaÃ§Ã£o', concluida: true },
                            { titulo: 'Revisar relatÃ³rio', concluida: false }
                        ]
                    },
                    {
                        id: Date.now() + 2,
                        titulo: 'Implementar nova funcionalidade',
                        tipo: 'desenvolvimento',
                        prioridade: 'critica',
                        status: 'revisao',
                        responsavel: 'Isabella',
                        progresso: 85,
                        dataInicio: hoje.toISOString().split('T')[0]
                    }
                ];
                
                if (!App.dados.tarefas) App.dados.tarefas = [];
                App.dados.tarefas.push(...tarefasExemplo);
                
                resultado.innerHTML += `âœ… ${tarefasExemplo.length} tarefas adicionadas<br>`;
                resultado.innerHTML += 'ğŸ“‹ Agora abra a agenda para ver as tarefas!<br>';
                
                Notifications.success('Tarefas de exemplo adicionadas!');
            } else {
                resultado.innerHTML += 'âŒ App.dados nÃ£o disponÃ­vel<br>';
            }
        }
        
        function debugAgendaCompleto() {
            const resultado = document.getElementById('resultadoAgenda');
            resultado.innerHTML = 'ğŸ”§ Debug completo da agenda...<br>';
            
            if (typeof diagnosticarAgenda === 'function') {
                diagnosticarAgenda();
                resultado.innerHTML += 'âœ… DiagnÃ³stico executado (veja console)<br>';
            }
            
            if (typeof testeRapidoAgenda === 'function') {
                const teste = testeRapidoAgenda();
                resultado.innerHTML += `ğŸ§ª Teste rÃ¡pido: ${teste.percentual}% sucesso<br>`;
            }
            
            // Verificar estado atual
            if (typeof PersonalAgenda !== 'undefined') {
                resultado.innerHTML += `ğŸ”„ Modal aberto: ${PersonalAgenda.state.modalAberto}<br>`;
                resultado.innerHTML += `ğŸ“± View atual: ${PersonalAgenda.state.viewModeAtual}<br>`;
                resultado.innerHTML += `ğŸ‘¤ UsuÃ¡rio: ${PersonalAgenda.state.usuarioAtual}<br>`;
            }
            
            resultado.innerHTML += 'ğŸ¯ Debug completo - veja console para detalhes<br>';
        }
        
        function testarSistemaCompleto() {
            Notifications.info('ğŸ§ª Executando teste completo do sistema hÃ­brido...');
            
            // Teste sequencial
            setTimeout(() => testarSistemaAgenda(), 500);
            setTimeout(() => testarModulosAgenda(), 1000);
            setTimeout(() => testarIntegracaoAgenda(), 1500);
            
            // Executar diagnÃ³stico se disponÃ­vel
            setTimeout(() => {
                if (typeof diagnosticarAgenda === 'function') {
                    diagnosticarAgenda();
                }
            }, 2000);
            
            Notifications.success('ğŸ‰ Teste completo do sistema hÃ­brido iniciado!');
        }
        
        // Teste de notificaÃ§Ãµes simples
        function testarNotificacoes() {
            Notifications.success('Sistema hÃ­brido v6.5.1 funcionando!');
        }
        
        // Teste de notificaÃ§Ãµes mÃºltiplas
        function testarNotificacaoToast() {
            Notifications.mostrarNotificacaoToast('Sistema hÃ­brido', 'success');
            setTimeout(() => Notifications.mostrarNotificacaoToast('Agenda pessoal', 'info'), 500);
            setTimeout(() => Notifications.mostrarNotificacaoToast('100% funcional!', 'success'), 1000);
        }
        
        // âœ… FUNÃ‡Ã•ES DE TESTE DOS MÃ“DULOS BASE (mantidas do sistema anterior)
        function testarModalCalendarioPDF() {
            const resultado = document.getElementById('resultadoPDF');
            resultado.innerHTML = 'ğŸ“… Testando modal de calendÃ¡rio PDF...<br>';
            
            if (typeof PDF !== 'undefined') {
                PDF.mostrarModalCalendario();
                resultado.innerHTML += 'âœ… Modal de configuraÃ§Ã£o do calendÃ¡rio aberto<br>';
            } else {
                resultado.innerHTML += 'âŒ MÃ³dulo PDF nÃ£o encontrado<br>';
            }
        }
        
        function testarModalAgendaPDF() {
            const resultado = document.getElementById('resultadoPDF');
            resultado.innerHTML = 'ğŸ“‹ Testando modal de agenda semanal PDF...<br>';
            
            if (typeof PDF !== 'undefined') {
                PDF.mostrarModalAgenda();
                resultado.innerHTML += 'âœ… Modal de configuraÃ§Ã£o da agenda aberto<br>';
            } else {
                resultado.innerHTML += 'âŒ MÃ³dulo PDF nÃ£o encontrado<br>';
            }
        }
        
        function testarStatusPDF() {
            const resultado = document.getElementById('resultadoPDF');
            resultado.innerHTML = 'âš™ï¸ Verificando status do sistema PDF...<br>';
            
            if (typeof PDF !== 'undefined') {
                const status = PDF.obterStatus();
                resultado.innerHTML += `âœ… MÃ³dulo PDF carregado<br>`;
                resultado.innerHTML += `ğŸ“š jsPDF: ${status.moduloCarregado ? 'DisponÃ­vel' : 'NÃ£o encontrado'}<br>`;
                resultado.innerHTML += `ğŸ”— DependÃªncias OK: ${status.dependenciasOk ? 'Sim' : 'NÃ£o'}<br>`;
            } else {
                resultado.innerHTML += 'âŒ MÃ³dulo PDF nÃ£o encontrado<br>';
            }
        }
        
        function testarDependenciasPDF() {
            const resultado = document.getElementById('resultadoPDF');
            resultado.innerHTML = 'ğŸ”— Verificando dependÃªncias do PDF...<br>';
            
            if (typeof window.jspdf !== 'undefined') {
                resultado.innerHTML += 'âœ… jsPDF library carregada<br>';
            } else {
                resultado.innerHTML += 'âŒ jsPDF library nÃ£o encontrada<br>';
            }
            
            if (typeof App !== 'undefined' && App.dados) {
                resultado.innerHTML += 'âœ… App.dados disponÃ­vel<br>';
            } else {
                resultado.innerHTML += 'âŒ App.dados nÃ£o disponÃ­vel<br>';
            }
        }
        
        function testarModalNovaTarefa() {
            if (typeof Tasks !== 'undefined') {
                Tasks.mostrarNovaTarefa('equipe', 'UsuÃ¡rio Teste');
            }
        }
        
        function testarBuscaTarefas() {
            if (typeof Tasks !== 'undefined') {
                const tarefas = Tasks.buscarTarefas();
                document.getElementById('resultadoTasks').innerHTML = `ğŸ” Encontradas ${tarefas.length} tarefas<br>`;
            }
        }
        
        function testarEstatisticasTarefas() {
            if (typeof Tasks !== 'undefined') {
                const stats = Tasks.obterEstatisticas();
                document.getElementById('resultadoTasks').innerHTML = `ğŸ“Š Total: ${stats.total}<br>`;
            }
        }
        
        function criarTarefaTeste() {
            if (typeof App !== 'undefined' && App.dados) {
                const tarefa = {
                    id: Date.now(),
                    titulo: 'Tarefa de Teste',
                    tipo: 'projeto',
                    status: 'pendente',
                    responsavel: 'Teste'
                };
                
                if (!App.dados.tarefas) App.dados.tarefas = [];
                App.dados.tarefas.push(tarefa);
                
                Notifications.success('Tarefa de teste criada!');
            }
        }
        
        function testarModalNovoEvento() {
            if (typeof Events !== 'undefined') {
                Events.mostrarNovoEvento();
            }
        }
        
        function testarBuscaEventos() {
            if (typeof Events !== 'undefined') {
                const eventos = Events.buscarEventos();
                document.getElementById('resultadoEvents').innerHTML = `ğŸ” Encontrados ${eventos.length} eventos<br>`;
            }
        }
        
        function testarEstatisticasEventos() {
            if (typeof Events !== 'undefined') {
                const stats = Events.obterEstatisticas();
                document.getElementById('resultadoEvents').innerHTML = `ğŸ“Š Total: ${stats.total}<br>`;
            }
        }
        
        function criarEventoTeste() {
            if (typeof App !== 'undefined' && App.dados) {
                const evento = {
                    id: Date.now(),
                    titulo: 'Evento de Teste',
                    tipo: 'reuniao',
                    data: new Date().toISOString().split('T')[0]
                };
                
                App.dados.eventos.push(evento);
                
                if (typeof Calendar !== 'undefined') {
                    Calendar.gerar();
                }
                
                Notifications.success('Evento de teste criado!');
            }
        }
        
        // âœ… LOG INICIAL E INICIALIZAÃ‡ÃƒO
        console.log('ğŸ‰ Sistema HÃ­brido v6.5.1 - Carregamento completo!');
        console.log('ğŸ“¦ MÃ³dulos base + agenda pessoal carregados');
        
        // âœ… INICIALIZAÃ‡ÃƒO AUTOMÃTICA
        setTimeout(() => {
            Notifications.success('ğŸ‰ Sistema hÃ­brido v6.5.1 inicializado com sucesso!');
            
            // Inicializar dados se necessÃ¡rio
            if (typeof App !== 'undefined' && typeof DataStructure !== 'undefined') {
                if (!App.dados) {
                    App.dados = DataStructure.inicializarDados();
                }
                if (!App.usuarioAtual) {
                    App.usuarioAtual = { email: 'admin@sistema.com', displayName: 'Isabella' };
                }
                console.log('ğŸ“Š Dados inicializados para sistema hÃ­brido');
            }
            
            // Inicializar calendÃ¡rio
            if (typeof Calendar !== 'undefined') {
                setTimeout(() => {
                    const mesAnoCalendario = document.getElementById('mesAnoCalendario');
                    if (mesAnoCalendario && Calendar.config) {
                        const status = Calendar.obterStatus();
                        mesAnoCalendario.textContent = `${status.mesNome} ${status.anoAtual}`;
                    }
                }, 500);
            }
            
            // Status inicial da agenda
            setTimeout(() => {
                const resultado = document.getElementById('resultadoAgenda');
                if (resultado) {
                    resultado.innerHTML = 'âœ… Sistema hÃ­brido v6.5.1 inicializado!<br>';
                    resultado.innerHTML += 'ğŸ“‹ Agenda pessoal pronta para uso<br>';
                    resultado.innerHTML += 'ğŸ¯ Clique em "Abrir Minha Agenda" para testar<br>';
                }
            }, 1000);
            
        }, 1000);
    </script>
</body>
</html>
